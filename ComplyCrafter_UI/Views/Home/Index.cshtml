@{
    ViewData["Title"] = "Home Page";
}
<style>
    .hover-effect:hover {
        cursor: pointer;
        transform: translateY(-2px);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 .5rem 1rem rgba(0, 0, 0, .15) !important;
    }
</style>
<div class="row">
    <div class="col">
        <div class="page-description">
            <h1>Dashboard</h1>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-6">
        <a asp-controller="Home" asp-action="Company" class="text-decoration-none text-reset">
            <div class="card widget widget-stats hover-effect">
                <div class="card-body">
                    <div class="widget-stats-container d-flex">
                        <div class="widget-stats-icon widget-stats-icon-primary">
                            <i class="material-icons-outlined">paid</i>
                        </div>
                        <div class="widget-stats-content flex-fill">
                            <span class="widget-stats-title">Clients</span>
                            <span class="widget-stats-amount" id="company_count">...</span>
                        </div>
                    </div>
                </div>
            </div>
        </a>
    </div>
    <div class="col-xl-6">
        <a asp-controller="Home" asp-action="Meeting" asp-route-id="BM" class="text-decoration-none text-reset">
            <div class="card widget widget-stats hover-effect">
                <div class="card-body">
                    <div class="widget-stats-container d-flex">
                        <div class="widget-stats-icon widget-stats-icon-warning">
                            <i class="material-icons-outlined">person</i>
                        </div>
                        <div class="widget-stats-content flex-fill">
                            <span class="widget-stats-title">Meetings</span>
                            <span class="widget-stats-amount" id="Meeting_count">...</span>
                            @* <span class="widget-stats-info">790 unique this month</span> *@
                        </div>
                        @* <div class="widget-stats-indicator widget-stats-indicator-positive align-self-start">
                     <i class="material-icons">keyboard_arrow_up</i> 12%
                 </div> *@
                    </div>
                </div>
            </div>
        </a>
    </div>



    @* <div class="col-xl-4">
       <a asp-controller="Home" asp-action="Process"  class="text-decoration-none text-reset">
            <div class="card widget widget-stats hover-effect">
                <div class="card-body">
                <div class="widget-stats-container d-flex">
                    <div class="widget-stats-icon widget-stats-icon-danger">
                        <i class="material-icons-outlined">file_download</i>
                    </div>
                    <div class="widget-stats-content flex-fill">
                        <span class="widget-stats-title">Process</span>
                       
                        <span class="widget-stats-amount">3</span>
                    </div>
                    <div class="widget-stats-indicator widget-stats-indicator-positive align-self-start">
                        <i class="material-icons">keyboard_arrow_up</i> 12%
                    </div> 
                </div>
            </div>
        </div>
        </a>
    </div> *@
    
</div>
<div class="row">
    <div class="col-12">
        <div class="card widget widget-list">
            <div class="card-header">
                @* <h5 class="card-title">Active Tasks<span class="badge badge-success badge-style-light">14 completed</span></h5> *@
            </div>
            <div class="card-body">
                <div id="calendar"></div>
            </div>
        </div>
    </div>
</div>


@section Styles {
    <link href="~/assets/plugins/apexcharts/apexcharts.css" rel="stylesheet" />
    <link href="~/assets/plugins/fullcalendar/lib/main.min.css" rel="stylesheet">
}

@section Scripts {
    <script src="~/assets/js/pages/dashboard.js"></script>
    <script src="~/assets/plugins/apexcharts/apexcharts.min.js"></script>
    <script src="~/assets/plugins/fullcalendar/lib/main.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialDate: '2025-04-01',
                editable: true,
                selectable: true,
                businessHours: true,
                dayMaxEvents: true, // allow "more" link when too many events
                events: [
                    {
                        title: 'All Day Event',
                        start: '2025-04-01'
                    },
                    {
                        title: 'Long Event',
                        start: '2025-04-07',
                        end: '2025-04-10'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2025-04-09T16:00:00'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2025-04-16T16:00:00'
                    },
                    {
                        title: 'Conference',
                        start: '2025-04-11',
                        end: '2025-04-13'
                    },
                    {
                        title: 'Meeting',
                        start: '2025-04-12T10:30:00',
                        end: '2025-04-12T12:30:00'
                    },
                    {
                        title: 'Lunch',
                        start: '2025-04-12T12:00:00'
                    },
                    {
                        title: 'Meeting',
                        start: '2025-04-12T14:30:00'
                    },
                    {
                        title: 'Happy Hour',
                        start: '2025-04-12T17:30:00'
                    },
                    {
                        title: 'Dinner',
                        start: '2025-04-12T20:00:00'
                    },
                    {
                        title: 'Birthday Party',
                        start: '2025-04-13T07:00:00'
                    },
                    {
                        title: 'Click for Google',
                        url: 'http://google.com/',
                        start: '2025-04-28'
                    }
                ]
            });

            calendar.render();
        });
        setTimeout(function(){
            $.get(`@R.ApiUrl/Subscription/UsedCompanyCount`).then(
                r => {
                    //console.log(r);
                    $('#company_count').text(r.message)
                }
            )
        },100);
        var company = localStorage.getItem("comp_id");
        var finYear = 'none';
        $.get(`@R.ApiUrl/Meeting/GetByCompanyAndType/${company}/bm/${finYear}`).then(
            r => {
                //console.log(r);
                $('#Meeting_count').text(r.length)
            })
    </script>
}
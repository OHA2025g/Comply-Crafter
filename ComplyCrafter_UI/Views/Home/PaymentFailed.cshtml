@{
    ViewData["Title"] = "Payment Failed";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<div class="container py-5 text-center">
    <div class="mb-4">
        <i class="bi bi-x-circle-fill text-danger fs-1"></i>
    </div>
    <h2 class="fw-bold text-danger">Payment Failed</h2>
    <p class="text-muted mb-4">Something went wrong. Your payment was not processed.</p>

    <div class="card shadow-sm mx-auto" style="max-width: 500px;">
        <div class="card-body">
            <h5 class="mb-2">Transaction Attempt Details</h5>
            <p class="mb-1"><strong>Transaction ID:</strong> @ViewBag.TransactionId</p>
            <p class="mb-1"><strong>Plan:</strong> <span id="spnPlan"></span></p>
            <p class="mb-1"><strong>Amount Paid:</strong> <span id="spnAmount"></span>/-</p>
            <p class="mb-1"><strong>Status:</strong> <span class="text-danger">Failed</span></p>
        </div>
    </div>

    <a href="@Url.Action("Subscription", "Home")" class="btn btn-outline-danger mt-4">Try Again</a>
</div>
<script>
    $(document).ready(function(){
        var vHeaderValue ='';
        if('@ViewBag.TransactionId' != '')
        {

            $.ajax({
                url: '@R.ApiUrl/Payment/Transaction',
                data: { 'TransactionId':'@ViewBag.TransactionId'},
                contentType: 'application/json',
                type: 'GET',
                success: data => {
                    if (data.status) {
                        $('#spnAmount').text(data.responseObject.transactionAmount);
                        $('#spnPlan').text(data.responseObject.subscriptionPlanName);
                    }else
                    {
                        toastr.error(data.message);
                    }
                }
            });
        }
        else
            window.location.href = "/Home/Login";
    });
</script>
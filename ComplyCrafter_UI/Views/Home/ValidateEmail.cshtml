@{
	Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="@R.AppName Dashboard">
	<meta name="keywords" content="admin,dashboard">
	<meta name="author" content="stacks">
	<title>@R.AppName @(ViewData["Title"] != null ? $"- {ViewData["Title"]}" : "")</title>
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;500;600;700;800&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
	<link href="~/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="~/assets/plugins/perfectscroll/perfect-scrollbar.css" rel="stylesheet">
	<link href="~/assets/plugins/pace/pace.css" rel="stylesheet">
	<link href="~/assets/plugins/highlight/styles/github-gist.css" rel="stylesheet">
	<link href="https://cdn.datatables.net/v/bs5/dt-2.1.8/b-3.2.0/b-colvis-3.2.0/b-html5-3.2.0/r-3.0.3/sc-2.4.3/datatables.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.1.1/css/bootstrap5-toggle.min.css" rel="stylesheet">
	<link href="~/assets/css/main.min.css" rel="stylesheet">
	<link href="~/assets/css/custom.css" rel="stylesheet">
	<link href="~/assets/plugins/select2/css/select2.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />

	<link rel="icon" type="image/png" sizes="32x32" href="~/img/logos/logo_sq_2.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="~/img/logos/logo_sq_2.png" />
	<link rel="icon" href="~/img/favicon.png" />
	<link rel="shortcut icon" href="~/img/favicon.png" />
	<link rel="apple-touch-icon" href="~/img/favicon.png" />
	<link href="~/assets/plugins/toastr/toastr.min.css" rel="stylesheet" />
	<link href="~/css/site.css" rel="stylesheet" asp-append-version="true" />
	<link href="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.css" rel="stylesheet">
	<script src="~/assets/plugins/jquery/jquery-3.5.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/summernote@0.9.0/dist/summernote.min.js"></script>

	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f4f6f9;
			margin: 0;
			padding: 0;
		}

		.container {
			max-width: 600px;
			margin: 80px auto;
			background: #ffffff;
			padding: 40px;
			border-radius: 10px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			text-align: center;
		}

		.checkmark {
			font-size: 60px;
			color: #4CAF50;
			margin-bottom: 20px;
		}

		.checkmark-red {
			font-size: 60px;
			color: red;
			margin-bottom: 20px;
		}

		h1 {
			font-size: 26px;
			margin-bottom: 10px;
			color: green;
		}

		.h1red {
			font-size: 26px;
			margin-bottom: 10px;
			color: red !important;
		}

		p {
			font-size: 16px;
			color: #666;
			margin-bottom: 30px;
		}

		.btn {
			display: inline-block;
			padding: 12px 24px;
			background-color: #414EF9;
			color: white;
			text-decoration: none;
			border-radius: 6px;
			font-size: 16px;
		}

			.btn:hover {
				background-color: #0d1682;
				color: white;
			}
	</style>

</head>

<body>


	<div class="container" id="divSuccess" style="display:none;">
		<div class="checkmark"><i class="fa fa-check"></i></div>
		<h1>Email Verified Successfully</h1>
		<p>Thank you! Your email has been verified. You can now continue using our services.</p>
		<a asp-controller="Home" asp-action="Login" class="btn">Continue to Login</a>
	</div>

	<div class="container" id="divInvalid" style="display:none;">
		<div class="checkmark-red"><i class="fa fa-close"></i></div>
		<h1 class="h1red">Invalid verification link.</h1>
		<p>You can now log in to your account.</p>
		<a href="#" class="btn btnResend">Resend verification email</a>
	</div>

	<div class="container" id="divAlreadyVerified" style="display:none;">
		<div class="checkmark-red"><i class="fa fa-close"></i></div>
		<h1 class="h1red">Verification Link Expired</h1>
		<p>Oops! The link you used has expired or is no longer valid. Please request a new verification email.</p>
		<a asp-controller="Home" asp-action="Login" class="btn">Login</a>
	</div>

	<div class="container" id="divError" style="display:none;">
		<div class="checkmark-red"><i class="fa fa-close"></i></div>
		<h1 class="h1red">Verification Link Expired</h1>
		<p>Oops! The link you used has expired or is no longer valid. Please request a new verification email.</p>
		<a href="#" class="btn btnResend">Resend verification email</a>
	</div>

	<!-- Javascripts -->
	<script src="~/assets/plugins/bootstrap/js/popper.min.js"></script>
	<script src="~/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="~/assets/plugins/perfectscroll/perfect-scrollbar.min.js"></script>
	<script src="~/assets/plugins/pace/pace.min.js"></script>
	<script src="~/assets/js/main.min.js"></script>
	<script src="~/assets/js/custom.js"></script>
	<script src="~/assets/plugins/toastr/toastr.min.js"></script>
	<script src="~/js/site.js" asp-append-version="true"></script>
	<script src="~/assets/plugins/highlight/highlight.pack.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/v/bs5/dt-2.1.8/b-3.2.0/b-colvis-3.2.0/b-html5-3.2.0/r-3.0.3/sc-2.4.3/datatables.min.js"></script>
	<script src="~/assets/plugins/moment/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.21.0/jquery.validate.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap5-toggle@5.1.1/js/bootstrap5-toggle.jquery.min.js"></script>
	<script src="~/assets/plugins/select2/js/select2.full.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js"></script>



	<script>

		$(document).ready(function ()
		{
			$('#divSuccess').hide();
			$('#divInvalid').hide();
			$('#divError').hide();
			$('#divAlreadyVerified').hide();
			let isResendClicked=false;

			localStorage.setItem('authToken', '');
			if('@ViewBag.Key' != '' & !isResendClicked)
			{
				
				$.ajax({
					url: '@R.ApiUrl/Email/ValidateEmail',
					data: { 'key':'@ViewBag.Key'},
					contentType: 'application/json',
					type: 'GET',
					success: data => {
						//debugger
						if (data.status) {
							toastr.success(data.message);
							$('#divSuccess').show();
						}else
						{
							toastr.error(data.message);
							if(data.message == 'Your email address has already been verified.')
								$('#divAlreadyVerified').show();
							else if(data.message == 'Invalid verification link.')
								$('#divInvalid').show();
							else
								$('#divError').show();
						}
					}
				});
			}

			$('.btnResend').click(function(){
				isResendClicked=true;
				$.ajax({
					url: '@R.ApiUrl/Email/ResendEmail',
					data: { 'key':'@ViewBag.Key', 'emailType':'emailverify'},
					contentType: 'application/json',
					type: 'GET',
					success: data => {
						//debugger
						if (data.status) {
							toastr.success(data.message);
							$('#divSuccess').show();
							$('#divInvalid').hide();
							$('#divError').hide();
							$('#divAlreadyVerified').hide();
						}else
						{
							toastr.error(data.message);
							if(data.message == 'Your email address has already been verified.')
							{
								$('#divSuccess').hide();
								$('#divError').hide();
								$('#divInvalid').hide();
								$('#divAlreadyVerified').show();
							}
							else
							{
								$('#divSuccess').hide();
								$('#divError').show();
								$('#divInvalid').hide();
								$('#divAlreadyVerified').hide();
							}
						}
					}
				});
			});
		});
	</script>

</body>
</html>
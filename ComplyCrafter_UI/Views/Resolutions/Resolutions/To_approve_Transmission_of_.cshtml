@{
    ViewData["Title"] = "Particulars of Transfer of Shares";
}

<style>
    .custom-table {
        border-collapse: collapse;
        width: 100%;
        margin-bottom: 20px;
        table-layout: fixed;
    }

        .custom-table td, .custom-table th {
            border: 1px solid #ccc;
            padding: 8px;
            vertical-align: middle;
        }

        .custom-table th {
            background: #f8f9fa;
            font-weight: 600;
            text-align: center;
        }

    .form-control, .form-select {
        width: 100%;
        padding: 6px;
        box-sizing: border-box;
    }

    .btn-custom {
        background-color: #2269f5;
        color: #fff;
        border-radius: 6px;
        padding: 6px 16px;
        border: none;
    }

        .btn-custom:hover {
            background-color: #1b56c2;
        }

    .section-heading {
        background: #f8f9fa;
        font-weight: 600;
        text-align: center;
        padding: 6px;
        border: 1px solid #ccc;
        margin-bottom: -1px;
    }
</style>

<div class="card shadow-sm p-4">
    <h4 class="text-primary mb-3">Particulars of Transfer of Shares</h4>



    <div class="section-heading">DIRECTOR & SIGNATORY DETAILS</div>
    <div class="p-3 border">
        <div class="row mb-3">
            <div class="col-md-6">
                <label class="form-label"><strong>Name of the Managing Director</strong></label>
                <select class="form-select" name="ManagingDirectorName">
                    <option value="">Select Managing Director</option>
                    <option>Director 1</option>
                    <option>Director 2</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label"><strong>Name of the Authorized Signatory</strong></label>
                <select class="form-select" name="AuthorizedSignatory">
                    <option value="">Select Director</option>
                    <option>John Doe</option>
                    <option>Jane Smith</option>
                </select>
            </div>
        </div>


    </div>








    <div class="card shadow-sm p-4">
        <h5 style="text-transform:uppercase;text-decoration:underline;margin-left:-10px;">Particulars of Approval</h5>

        <form id="TransferShareTransfershareForm" method="post" onsubmit="return validateMyForm(event);">
            <!-- TYPE OF TRANSFER -->
            <div class="mb-3">
                <div class="row align-items-center">
                    <div class="col-md-3 fw-bold">Type of Transfer</div>
                    <div class="col-md-6">
                        <label class="me-3"><input type="radio" name="typeoftransfer" value="Demat" required> Demat</label>
                        <label><input type="radio" name="typeoftransfer" value="Physical" required> Physical</label>
                    </div>
                    <div class="col-md-3 showondemat" style="display:none;">
                        <div class="fw-bold">Take note of this transmission in Board meeting?</div>
                        <label class="me-2"><input type="radio" name="wanttonote" value="Yes"> Yes</label>
                        <label><input type="radio" name="wanttonote" value="No"> No</label>
                    </div>
                </div>
            </div>

            <!-- APPROVAL MODE (only when wanttonote=Yes) -->
            <div class="mb-3 showonnoting" style="display:none;">
                <div class="row">
                    <div class="col-md-3 fw-bold">Approval Mode</div>
                    <div class="col-md-9">
                        <label class="me-3"><input type="radio" name="whichmeeting" value="BoardMeeting"> In Board meeting</label>
                        <label><input type="radio" name="whichmeeting" value="CircularResolution"> By Circular Resolution</label>
                    </div>
                </div>
            </div>

            <!-- BOARD MEETING vs CIRCULAR -->
            <div id="boardmeeting" style="display:none;">
                <div class="mb-3">
                    <div class="row align-items-center">
                        <div class="col-md-9 fw-bold">
                            Do you want to incorporate this agenda in existing Board Meeting?
                        </div>
                        <div class="col-md-3">
                            <label class="me-2"><input type="radio" name="existmeeting" value="Yes"> Yes</label>
                            <label><input type="radio" name="existmeeting" value="No"> No</label>
                        </div>
                    </div>
                </div>

                <div id="existmeetingyes" style="display:none;" class="mb-3">
                    <div class="row">
                        <div class="col-md-3 fw-bold">Select Existing Meeting</div>
                        <div class="col-md-9">
                            <select name="m_id" id="m_id" class="form-control m_id">
                                <option value="">Select Existing Meeting</option>
                                <option value="143245">15/04/2025</option>
                                <option value="94757">30/09/2024</option>
                                <option value="94756">14/08/2024</option>
                                <option value="94755">15/06/2024</option>
                                <!-- ... keep options as required ... -->
                            </select>
                        </div>
                    </div>
                </div>

                <div id="existmeetingno" class="mb-3" style="display:block;">
                    <div class="row">
                        <div class="col-md-3 fw-bold">Date of New Meeting</div>
                        <div class="col-md-3">
                            <input type="text" name="meetingdate" id="meetingdate" class="datepicker form-control" autocomplete="off" placeholder="Date of New Meeting">
                        </div>
                        <div class="col-md-3 fw-bold">Time of New Meeting</div>
                        <div class="col-md-3">
                            <input id="datetimepicker2" type="text" name="timing" class="form-control timing" placeholder="Time">
                        </div>
                    </div>
                </div>
            </div>

            <div id="circular" style="display:none;" class="mb-3">
                <div class="row">
                    <div class="col-md-3 fw-bold">Date of Passing Circular Resolution</div>
                    <div class="col-md-9">
                        <input type="text" id="circularresdate" name="circularresdate" class="datepicker form-control" autocomplete="off" placeholder="Date of Passing Circular Resolution">
                    </div>
                </div>
            </div>

            <!-- Authorized Signatory (show only when wanttonote Yes) -->
            <div class="row showonnoting" style="display:none;">
                <div class="col-md-3 fw-bold">Name of the Authorized Signatory</div>
                <div class="col-md-3">
                    <select name="chairman" class="director form-control">
                        <option value="">Select Director</option>
                        <!-- keep options loaded server-side -->
                    </select>
                </div>

                <div class="col-md-3 fw-bold">Date of Transmission</div>
                <div class="col-md-3">
                    <input name="datetransmission" id="datetransmission" class="datepicker form-control" required placeholder="Date of Transmission" autocomplete="off">
                </div>
            </div>

            <!-- If wanttonote not used, still show date -->
            <div class="row mt-3" style="display:none;" id="datetransmission-row">
                <div class="col-md-3 fw-bold">Date of Transmission</div>
                <div class="col-md-3">
                    <input name="datetransmission" id="datetransmission2" class="datepicker form-control" required placeholder="Date of Transmission" autocomplete="off">
                </div>
            </div>

            <hr>

            <!-- PARTICULARS OF DECEASED SHAREHOLDER (dynamic rows) -->
            <h5 style="text-transform:uppercase;text-decoration:underline;margin-left:-10px;">Particulars of Deceased Shareholder</h5>

            <input type="hidden" name="i" id="i" value="1">

            <div id="allotment_info">
                <!-- initial single transmission block -->
                <div class="transmission-block border rounded p-3 mb-3" data-index="1">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <label class="mb-0 fw-bold">1. Transmission Detail</label>
                        <div>
                            <button type="button" class="btn btn-danger btn-sm btn-remove-transmission" title="Remove">Remove</button>
                        </div>
                    </div>

                    <div class="row g-2">
                        <div class="col-md-3">
                            <label class="form-label">Deceased Shareholder</label>
                            <select name="transferor[]" id="transferor_1" class="form-control transferor_1" required onchange="checkquantity('transferor_1','quantity_1','datetransmission')">
                                <option value="">Select Deceased Shareholder</option>
                                <option value="48571">Mr. Pakshal Kiran Shah (1)</option>
                                <option value="48572">Mr. Kiran Premchand Shah (2)</option>
                                <option value="106248">Siddharth Ravi Prakash Singh (03)</option>
                            </select>
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">Legal Heir</label>
                            <select name="transferree[]" id="transferree_1" class="form-control transferree_1" required>
                                <option value="">Select Legal Heir</option>
                            </select>
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">Quantity</label>
                            <input type="text" name="quantity[]" id="quantity_1" class="form-control numbers" placeholder="Enter Quantity" required onchange="checkquantity('transferor_1','quantity_1','datetransmission')">
                        </div>

                        <div class="col-md-3">
                            <label class="form-label">Transmission Number</label>
                            <input type="text" name="transferno[]" class="form-control" placeholder="Transmission Number">
                        </div>
                    </div>

                    <!-- physical-only small block (kept grouped) -->
                    <div class="physical-block mt-3" style="display:none;">
                        <div class="row g-2">
                            <div class="col-md-3">
                                <label class="form-label">Status</label>
                                <select name="status[]" class="form-control">
                                    <option value="">Select Status</option>
                                    <option value="Nominee">Nominee</option>
                                    <option value="Legal Heir">Legal Heir</option>
                                    <option value="Successor">Successor</option>
                                    <option value="Executor">Executor</option>
                                </select>
                            </div>

                            <div class="col-md-3">
                                <label class="form-label">Relation with deceased</label>
                                <input type="text" name="relation[]" class="form-control" placeholder="Relation with deceased">
                            </div>

                            <div class="col-md-3">
                                <label class="form-label">Place of Death</label>
                                <input type="text" name="placedeath[]" class="form-control" placeholder="Place of Death">
                            </div>

                            <div class="col-md-3">
                                <label class="form-label">Date of Death</label>
                                <input type="text" name="datedeath[]" class="datepicker form-control" placeholder="Date of Death" autocomplete="off">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-end mb-3">
                <button type="button" class="btn btn-custom" id="nooftransfer">+ Add More Transmission</button>
            </div>


            <div class="border rounded p-3 mb-3 bg-light-subtle">
                <h6 class="text-uppercase fw-bold mb-3" style="text-decoration: underline;">Document & Application Details</h6>
                <div class="row g-3">
                    <div class="col-md-3 fw-bold">Document Available</div>
                    <div class="col-md-3">
                        <select name="document" id="document" class="form-control">
                            <option value="">Select Document</option>
                            <option value="Probate of the Will">Probate of the Will</option>
                            <option value="Letter of Administration">Letter of Administration</option>
                            <option value="Succession Certificate">Succession Certificate</option>
                            <option value="Not Available">Not Available</option>
                        </select>
                    </div>

                    <div class="col-md-3 fw-bold">Date of the Order</div>
                    <div class="col-md-3">
                        <input name="dateorder" id="dateorder" class="datepicker form-control" placeholder="Date of the Order" autocomplete="off">
                    </div>

                    <div class="col-md-3 fw-bold">Date of Indemnity Bond</div>
                    <div class="col-md-3">
                        <input name="dateindemnitybond" id="dateindemnitybond" class="datepicker form-control" placeholder="Date of Indemnity Bond" autocomplete="off">
                    </div>

                    <div class="col-md-3 fw-bold">Date of Affidavit</div>
                    <div class="col-md-3">
                        <input name="dateaffidavit" id="dateaffidavit" class="datepicker form-control" placeholder="Date of Affidavit" autocomplete="off">
                    </div>

                    <div class="col-md-3 fw-bold">Date of Application</div>
                    <div class="col-md-3">
                        <input name="dateapplication" id="dateapplication" class="datepicker form-control" placeholder="Date of Application" autocomplete="off">
                    </div>

                    <div class="col-md-3 fw-bold">Place</div>
                    <div class="col-md-3">
                        <input name="placesigning" id="placesigning" class="form-control" placeholder="Place of Signing" autocomplete="off">
                    </div>
                </div>
            </div>














        <h4 class="mb-4 border-bottom pb-2 mt-4">Agenda Details</h4>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Agenda
            </div>
            <div class="col-md-9">
                <select name="agenda" class="form-control">
                    <option>To approve transfer of {shares}</option>
                </select>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Agenda Heading <span class="text-danger">*</span>
            </div>
            <div class="col-md-9">
                <input type="text" class="form-control" value="To approve transfer of {shares}">
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Minute Heading <span class="text-danger">*</span>
            </div>
            <div class="col-md-9">
                <input type="text" class="form-control" value="To approve transfer of {shares}">
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Agenda Preface
            </div>
            <div class="col-md-9">
                <textarea rows="6" class="form-control">
The Board will discuss the matter regarding the allotment of [Number of shares to be issued] [Type of Shares_E] 
</textarea>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Minute Preface
            </div>
            <div class="col-md-9">
                <textarea rows="6" class="form-control">
The Board discussed the matt
</textarea>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Resolution for Notice
            </div>
            <div class="col-md-9">
                <textarea rows="6" class="form-control">
"RESOLVED THAT pursuant to the provisions of Section 62(3) and all other applicable provisions of the Companies Act, 2013, the rules made thereunder, and the authority vested by the Articles of Association of the company, the consent of the Board be and is hereby accorded for the allotment of [Number of shares to be issued] [Type of Shares_E] of Rs. [Face Value Per Share]/- (Rupees [Face Value Per Share in words]) each at [Par/premium of Rs.] aggregating to Rs. [Total Amount]/- (Rupees [Total Amount in words]), to the holders of [Number of Debentures] [Type of Debentures] as per the conversion terms, to the following allottees:

</textarea>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Resolution for Minutes
            </div>
            <div class="col-md-9">
                <textarea rows="12" class="form-control">
"RESOLVED THAT pursuant to the provisions of Section 62(3) and all other applicable provisions of the Companies Act, 2013, the rules made thereunder, and the authority vested by the Articles of Association of the company, the consent of the Board be and is hereby accorded for the allotment of [Number of shares to be issued] [Type of Shares_E] of Rs. [Face Value Per Share]/- (Rupees [Face Value Per Share in words]) each at [Par/premium of Rs.] aggregating to Rs. [Total Amount]/- (Rupees [Total Amount in words]), to the holders of [Number of Debentures] [Type of Debentures] as per the conversion terms, to the following allottees:

</textarea>
            </div>
        </div>

        <div class="row mb-3">
            <div class="col-md-3 fw-bold">
                Resolution Signatory Details
            </div>
            <div class="col-md-9">
                <table class="table table-bordered table-sm align-middle" id="signatoryTable">
                    <thead class="table-light">
                        <tr>
                            <th>Sr. No.</th>
                            <th>Name of Signatory</th>
                            <th>DIN / PAN</th>
                            <th>Date of Signing</th>
                            <th style="width: 80px; text-align:center;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>
                                <select class="form-select">
                                    <option value="">Select Signatory</option>
                                    <option>John Doe</option>
                                    <option>Jane Smith</option>
                                    <option>Michael Johnson</option>
                                    <option>Emily Davis</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" class="form-control" placeholder="Enter DIN / PAN">
                            </td>
                            <td>
                                <input type="date" class="form-control">
                            </td>
                            <td style="text-align:center;">
                                <button type="button" class="btn btn-primary btn-sm btn-add-signatory">+</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col text-end">
                <button type="submit" class="btn btn-primary px-4 py-2">Submit</button>
            </div>
        </div>
    </form>
</div>



    <script>
        (function ($) {
          $(document).ready(function () {

            // helper to toggle physical-only blocks
            function setPhysicalVisibility(show) {
              if (show) {
                $('.physical-only').show();
                $('.physical-block').show(); // per transmission block
              } else {
                $('.physical-only').hide();
                $('.physical-block').hide();
              }
            }

            // Type of transfer -> Demat / Physical
            $('input[name="typeoftransfer"]').on('change', function () {
              const val = $(this).val();
              if (val === 'Demat') {
                $('.showondemat').show();
                setPhysicalVisibility(false);
                $('#datetransmission-row').hide();
              } else {
                // Physical
                $('.showondemat').hide();
                setPhysicalVisibility(true);
                $('#datetransmission-row').show();
              }
            });

            // Want to note -> show/hide approval mode
            $('input[name="wanttonote"]').on('change', function () {
              if ($(this).val() === 'Yes') {
                $('.showonnoting').show();
                $('#boardmeeting').show();
              } else {
                $('.showonnoting').hide();
                $('#boardmeeting').hide();
                $('#circular').hide();
              }
            });

            // Which meeting: Board vs Circular
            $('input[name="whichmeeting"]').on('change', function () {
              if ($(this).val() === 'BoardMeeting') {
                $('#boardmeeting').show();
                $('#circular').hide();
              } else {
                $('#boardmeeting').hide();
                $('#circular').show();
              }
            });

            // Exist meeting: Yes / No
            $(document).on('change', 'input[name="existmeeting"]', function () {
              if ($(this).val() === 'Yes') {
                $('#existmeetingyes').show();
                $('#existmeetingno').hide();
              } else {
                $('#existmeetingyes').hide();
                $('#existmeetingno').show();
              }
            });

            // ===== Dynamic Transmission Rows =====
            function renumberTransmissions() {
              $('#allotment_info .transmission-block').each(function (idx) {
                $(this).attr('data-index', idx + 1);
                $(this).find('.fw-bold').first().text((idx + 1) + '. Transmission Detail');
              });
            }

            // Remove (initial block remove should leave at least one block)
            $(document).on('click', '.btn-remove-transmission', function () {
              const blocks = $('#allotment_info .transmission-block');
              if (blocks.length > 1) {
                $(this).closest('.transmission-block').remove();
                renumberTransmissions();
              } else {
                // clear fields instead of removing last block
                $(this).closest('.transmission-block').find('select, input').val('');
              }
            });

            // Add more transmission
            $('#nooftransfer').on('click', function () {
              const index = $('#allotment_info .transmission-block').length + 1;
              const newBlock = `
                <div class="transmission-block border rounded p-3 mb-3" data-index="${index}">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="mb-0 fw-bold">${index}. Transmission Detail</label>
                    <div>
                      <button type="button" class="btn btn-danger btn-sm btn-remove-transmission" title="Remove">Remove</button>
                    </div>
                  </div>

                  <div class="row g-2">
                    <div class="col-md-3">
                      <label class="form-label">Deceased Shareholder</label>
                      <select name="transferor[]" class="form-control transferor_${index}" required>
                        <option value="">Select Deceased Shareholder</option>
                        <option value="48571">Mr. Pakshal Kiran Shah (1)</option>
                        <option value="48572">Mr. Kiran Premchand Shah (2)</option>
                        <option value="106248">Siddharth Ravi Prakash Singh (03)</option>
                      </select>
                    </div>

                    <div class="col-md-3">
                      <label class="form-label">Legal Heir</label>
                      <select name="transferree[]" class="form-control transferree_${index}" required>
                        <option value="">Select Legal Heir</option>
                      </select>
                    </div>

                    <div class="col-md-3">
                      <label class="form-label">Quantity</label>
                      <input type="text" name="quantity[]" class="form-control numbers quantity_${index}" placeholder="Enter Quantity" required>
                    </div>

                    <div class="col-md-3">
                      <label class="form-label">Transmission Number</label>
                      <input type="text" name="transferno[]" class="form-control" placeholder="Transmission Number">
                    </div>
                  </div>

                  <div class="physical-block mt-3" style="display:none;">
                    <div class="row g-2">
                      <div class="col-md-3">
                        <label class="form-label">Status</label>
                        <select name="status[]" class="form-control">
                          <option value="">Select Status</option>
                          <option value="Nominee">Nominee</option>
                          <option value="Legal Heir">Legal Heir</option>
                          <option value="Successor">Successor</option>
                          <option value="Executor">Executor</option>
                        </select>
                      </div>

                      <div class="col-md-3">
                        <label class="form-label">Relation with deceased</label>
                        <input type="text" name="relation[]" class="form-control" placeholder="Relation with deceased">
                      </div>

                      <div class="col-md-3">
                        <label class="form-label">Place of Death</label>
                        <input type="text" name="placedeath[]" class="form-control" placeholder="Place of Death">
                      </div>

                      <div class="col-md-3">
                        <label class="form-label">Date of Death</label>
                        <input type="text" name="datedeath[]" class="datepicker form-control" placeholder="Date of Death" autocomplete="off">
                      </div>
                    </div>
                  </div>
                </div>
              `;
              $('#allotment_info').append(newBlock);
              // show physical block if currently physical
              if ($('input[name="typeoftransfer"]:checked').val() === 'Physical') {
                $('.transmission-block').last().find('.physical-block').show();
              }
            });

            // show/hide physical-block for each existing/new block when transfer type toggles
            $(document).on('change', 'input[name="typeoftransfer"]', function () {
              const isPhysical = $(this).val() === 'Physical';
              $('.transmission-block').each(function () {
                if (isPhysical) $(this).find('.physical-block').show();
                else $(this).find('.physical-block').hide();
              });
            });

            // Initialize visibility on page load (hide conditional sections)
            (function init() {
              $('.showondemat, .showonnoting, #boardmeeting, #circular, .physical-only, .physical-block, #existmeetingyes, #existmeetingno, #datetransmission-row').hide();
              // But keep existmeetingno visible by default (if you want it visible)
              $('#existmeetingno').show();
            })();

          });
        })(jQuery);
    </script>
<script>
    $(document).ready(function () {

        /* =====================================================
           1️⃣  Signatory Table - Add / Remove Rows
        ===================================================== */
        function updateSignatorySerials() {
            $("#signatoryTable tbody tr").each(function (i) {
                $(this).find("td:first").text(i + 1);
            });
        }

        $(document).on("click", ".btn-add-signatory", function () {
            const newRow = `
                <tr>
                    <td></td>
                    <td>
                        <select class="form-select">
                            <option value="">Select Signatory</option>
                            <option>John Doe</option>
                            <option>Jane Smith</option>
                            <option>Michael Johnson</option>
                            <option>Emily Davis</option>
                        </select>
                    </td>
                    <td><input type="text" class="form-control" placeholder="Enter DIN / PAN"></td>
                    <td><input type="date" class="form-control"></td>
                    <td class="text-center">
                        <button type="button" class="btn btn-danger btn-sm btn-remove-signatory">-</button>
                    </td>
                </tr>
            `;
            $("#signatoryTable tbody").append(newRow);
            updateSignatorySerials();
        });

        $(document).on("click", ".btn-remove-signatory", function () {
            $(this).closest("tr").remove();
            updateSignatorySerials();
        });


        /* =====================================================
           2️⃣  Shareholder Table (if present)
        ===================================================== */
        const tableBody = $("#shareholderTable tbody");

        $(document).on("click", "#addShareholder", function () {
            const newRow = `
                <tr>
                    <td>
                        <select class="form-select">
                            <option>Select Shareholder</option>
                            <option>Shareholder 1</option>
                            <option>Shareholder 2</option>
                        </select>
                    </td>
                    <td><input type="text" class="form-control" value="0" readonly /></td>
                    <td><input type="text" class="form-control" value="0" /></td>
                    <td><input type="text" class="form-control" value="0" readonly /></td>
                    <td><input type="text" class="form-control" value="0" readonly /></td>
                    <td><button type="button" class="btn btn-danger btn-sm btn-remove-shareholder">X</button></td>
                </tr>`;
            tableBody.append(newRow);
        });

        $(document).on("click", ".btn-remove-shareholder", function () {
            $(this).closest("tr").remove();
        });


        /* =====================================================
           3️⃣  Meeting Radio Buttons (Yes/No toggles)
        ===================================================== */
        $('input[name="IncorporateAgenda"]').on('change', function () {
            const value = $(this).val();
            $('#existingMeetingSection').toggle(value === 'Yes');
            $('#newMeetingSection').toggle(value === 'No');
        });


        /* =====================================================
           4️⃣  Transfer Type Logic (No Animations)
        ===================================================== */
        $('input[name="TypeOfTransfer"]').on('change', function () {
            if ($(this).val() === "Demat") {
                $('.showondemat').show();
            } else {
                $('.showondemat, .showonnoting, #boardmeeting, #circular').hide();
            }
        });

        $('input[name="WantToNote"]').on('change', function () {
            if ($(this).val() === "Yes") {
                $('.showonnoting').show();
            } else {
                $('.showonnoting, #boardmeeting, #circular').hide();
            }
        });

        $('input[name="WhichMeeting"]').on('change', function () {
            if ($(this).val() === "BoardMeeting") {
                $('#boardmeeting').show();
                $('#circular').hide();
            } else {
                $('#boardmeeting').hide();
                $('#circular').show();
            }
        });

        $('input[name="ExistMeeting"]').on('change', function () {
            if ($(this).val() === "Yes") {
                $('#existmeetingyes').show();
                $('#existmeetingno').hide();
            } else {
                $('#existmeetingyes').hide();
                $('#existmeetingno').show();
            }
        });


        /* =====================================================
           5️⃣  Add / Remove Transfer Blocks
        ===================================================== */
        $('#addTransfer').on('click', function () {
            let count = $('#allotment_info .transfer-block').length + 1;
            let newRow = `
            <div class="transfer-block border p-3 mb-3 rounded bg-light">
                <div class="d-flex justify-content-between mb-2">
                    <label class="fw-bold">${count}. Transfer</label>
                    <button type="button" class="btn btn-danger btn-sm remove-transfer">X</button>
                </div>
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label>Transferor</label>
                        <select class="form-select" required>
                            <option>Select Transferor</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label>Transferee</label>
                        <select class="form-select" required>
                            <option>Select Transferee</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label>Quantity</label>
                        <input type="number" class="form-control" placeholder="Enter Quantity" required>
                    </div>
                    <div class="col-md-3">
                        <label>Transfer Number</label>
                        <input type="text" class="form-control" placeholder="Transfer Number">
                    </div>
                </div>
            </div>`;
            $('#allotment_info').append(newRow);
        });

        $(document).on('click', '.remove-transfer', function () {
            $(this).closest('.transfer-block').remove();
            $('#allotment_info .transfer-block').each(function (i) {
                $(this).find('label.fw-bold').text((i + 1) + '. Transfer');
            });
        });

    });
</script>

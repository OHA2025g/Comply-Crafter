<style>
    .textheader a {
        color: blue;
        text-decoration: none !important;
    }

    .textheader:hover a {
        color: red !important;
        cursor: pointer;
    }

    input {
        box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05) !important;
    }

</style>

<div class="row m-auto" id="frm">
    <div class="card " style="flex-direction:row;">
        <div class=" col-lg-12">
            <div class="card-header ">
                <h3>
                    Form No. GNL-3
                </h3>

            </div>
            <div class="card-body" style="padding:0px 25px;">
                <p>
                    Particulars of person(s) charged for the purpose of sub clause (iii) or (iv) of clause 60 of section 2

                    [Pursuant to Companies Act, 2013 and sub rule(3) of rule12 of the Companies (Registration Offices and Fees) Rules, 2014]
                </p>

            </div>
            <div class="textheader my-4 mx-3">
                <a href="https://www.mca.gov.in/content/dam/mca-aem-forms/instructionkits/Form_GNL-3_instruction_kit.pdf" target="_blank">

                    Refer instruction kit for filing the form

                </a>
            </div>
        </div>

    </div>

    <div class="content-wrapper">
        <div class="container-fluid">
            <main role="main" class="pb-3">
                <div class="row">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between" style="padding: 15px 30px 10px;">
                            <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 active " href="javascript:;" role="part1" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Entity's Details
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 " href="javascript:;" role="part2" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Dsc details and Attachment
                                        </span>
                                    </a>
                                </li>

                            </ul>
                        </div>

                    </div>
                </div>


            </main>
        </div>
    </div>



    <div id="part1" class="p-0">



        @*  tab-1 *@

        <div class="card">
            <div class="col-md-12 p-0">
                <div class="card-body">
                    <input type="hidden" class="num" value="0" name="id" />
                    <input type="hidden" class="num" value="0" name="companyId" />
                    <div class="row">

                        <div class="d-flex justify-content-between mx-2 mb-2">
                            <p class="card-title mb-0" style="margin-top:1px; border-bottom:1px solid black;">
                                Company Details
                            </p>
                        </div>

                        <div class="col-md-6 my-2">
                            <label class="form-label">1. (a) *Corporate identity number (CIN) or Foreign company registration number (FCRN) of company</label>
                            <input type="text" placeholder="" class="form-control" value="" name="cin" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="col-md-6 my-2">
                            <label class="form-label">2. (a) *Name of the company</label>
                            <input type="text" placeholder="" class="form-control" value="" name="companyName" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="col-lg-12 my-2">
                            <label class="form-label">(b). *Address of the registered office of the company</label>
                            <input type="text" placeholder="SHOP NO 3 VERTEX VIKAS CHS LTD   WING A SIR M V RD BHD POLICE STN ANDHERI, MUMBAI, Mumbai City, Maharashtra, India, 400069" class="form-control" value="" name="companyAddress" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                            <div class="invalid-feedback"></div>
                        </div>

                        <div class="col-md-6 my-2">
                            <label class="form-label">(c). *Email ID of the company</label>
                            <input type="email" placeholder="akshaygraphics69@gmail.com" class="form-control" value="" name="companyEmail" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                            <div class="invalid-feedback"></div>
                        </div>
                        <div class="col-md-6 my-2">
                            <label class="form-label">3.*Number of person(s) charged</label>
                            <input type="text" inputmode="numeric" pattern="\d*" maxlength="2"
                                   class="form-control num" name="numberCharged" id="numberCharged"
                                   placeholder="" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                            <div class="invalid-feedback"></div>
                        </div>



                        <label style=" text-transform: uppercase; text-decoration:underline; font-weight: bolder; margin: 0px  5px; display: inline-block;" class="AdvertisementInviting mt-2">
                            Particulars of person(s) charged
                        </label>


                        <label style="font-weight:bolder;margin: 0px  5px;" class="mt-3">
                            *Whether consent is accepted or withdrawn or revoked
                        </label>

                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="margin-left: 0px;">
                            <input type="radio" name="permissionWithdrawn" style="cursor: not-allowed;" value="Acceptance" required="" class="" disabled> &nbsp; Acceptance &nbsp;
                            <input type="radio" name="permissionWithdrawn" style="cursor: not-allowed;" value="Withdrawal" required="" class="" disabled>&nbsp; Withdrawal &nbsp;
                            <input type="radio" name="permissionWithdrawn" style="cursor: not-allowed;" value="Revocation" required="" class="" disabled>&nbsp; Revocation
                        </div>

                        <div class="col-lg-12 my-3">
                            <label class="form-label">*Date of consent or revocation given under sub-clause (iii) of clause (60) of section 2</label>
                            <input type="date" placeholder="" class="form-control" value="" name="consentDate" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                            <div class="invalid-feedback"></div>
                        </div>

                        <div id="personTablesContainer"></div>

                        <div class="col-lg-12 my-3">
                            <label class="form-label">
                                4 *Date of the board resolution (DD/MM/YYYY)
                            </label>
                            <input type="date" placeholder="" class="form-control" value="" name="resolutionDate" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                            <div class="invalid-feedback"></div>
                        </div>


                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="part2" class="p-0">
        <div class="card" style="padding:25px;">
            <div id="Attachment" class="tab-pane in animated  custon-tab-style1 active">
                <div class="guideLoading guideServiceLoading" id="dvloader" style="display: none;"></div>
                <form action="" role="form" method="post" enctype="multipart/form-data" id="fupForm3">


                    <label style="font-weight: bolder; text-decoration: underline; text-transform: uppercase; margin: 0px  10px;">Attachments</label>

                    <div class="row mt-3" style="height: auto;" id="equity2">
                        <div class="col-xs-12 col-sm-5 col-md-5 form-row bold">5(a). *Copy of Board resolution</div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                            <input type="file" name="copyAttachment" id="copyattachment_1" class="1" accept=".jpg,.pdf" required="">
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 indemnityBonds_remove_hide" style="display:none;">
                            <a href="https://mcabucket.s3.ap-south-1.amazonaws.com/">                        </a> &nbsp;
                            <button type="button" name="remove" class="btn btn-danger copyattachment">X</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-1 col-md-1 bold form-row" align="center">
                            Sr. No
                        </div>
                        <div class="col-xs-12 col-sm-10 col-md-10 bold form-row">
                            (b) Optional attachment(s) - if any
                        </div>
                        <div class="col-xs-12 col-sm-1 col-md-1 form-row" align="center">
                            <button type="button" name="" id="attachmentadd" class="btn btn-primary"><i class="fa fa-plus"></i></button>
                        </div>

                    </div>
                    <div id="equity8">
                        <input type="hidden" name="l" id="l" value="1">

                        <div class="row" id="rowq1">
                            <div class="col-xs-12 col-sm-1 col-md-1 form-row" align="center">
                                1.
                            </div>
                            <div class="col-xs-12 col-sm-11 col-md-11 form-row">
                                <input type="file" name="optionalAttachment" id="optionalAttachment" class="1" accept=".jpg,.pdf">
                            </div>
                        </div>
                    </div>


                    <label style="font-weight: bolder; text-decoration: underline; text-transform: uppercase; margin: 5px 10px;">Verification</label>

                    <div class="row mt-3" style="height: auto;">
                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="padding: 10px;height: auto;">
                            <p style="text-align: justify; line-height: 26px;">
                                *To the best of our knowledge and belief, the   information given in this form and its attachments is correct and complete
                                <br> I or we have been authorised by the Board of directors' resolution <input type="text" name="directorResolution" id="BoardResolution" value="" required="">
                                &nbsp; dated &nbsp;<input type="date" name="directorDate" id="dateofdirector" value="" required="" placeholder="Resolution date" class="datepicker hasDatepicker">&nbsp; number*
                            </p>
                            <input type="checkbox" name="certificationDeclaration" id="" value="Y" required=""> &nbsp; I or we hereby consent to act as the person(s) charged for the purpose of Section 2(60)(iii) of the Companies Act, 2013
                        </div>
                    </div>


                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">
                            6. (c) *DIN/PAN Of Person Charged
                        </div>

                        <div class="col-xs-12 col-sm-3 col-md-3 form-row ">
                            <input type="text" name="dinOfPersonCharged" class="form-control" value="">
                        </div>
                    </div>



                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-6 col-md-6">
                            <b>6. (e). *Designation:</b>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6">
                            <b>6. (f). * DIN/PAN</b>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-6 col-md-6" style="margin-top:;margin-left: -10px;">
                            <select name="designation" id="Designationname" class="form-select" required="">
                                <option value="">Select Designation</option>
                                <option value="Director">Director</option>
                                <option value="Manager">Manager</option>
                                <option value="Company Secretary">Company Secretary</option>
                                <option value="CFO">CFO</option>
                                <option value="CEO">CEO</option>
                                <option value="Manager">Manager</option>
                                <option value="Managing Director">Managing Director</option>

                            </select>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-6" style="margin-top:;margin-left: -10px;" id="change_designation">
                            <input type="text" name="din" id="DirectorDin" class="form-control DirectorDin" value="" required="">
                        </div>
                    </div>



                    <div class="row">
                        <div class="col-xs-12 col-sm-5 col-md-5 bold" style="margin-left:-12px;">
                            Certification by Professional
                        </div>
                    </div>


                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-12 col-md-12 " style="margin-left:-12px;">
                            <p>I declare that I have been duly engaged for the purpose of certification of this form. It is hereby certified that I have gone through  the provisions of the Companies Act, 2013 and rules thereunder for the subject matter of this form and matters incidental thereto and I have verified the above particulars (including attachment(s)) from the original/certified records maintained by the Company/applicant which is subject matter of this form and found them to be true, correct and complete and no information material to this form has been suppressed.</p>
                            <p>I further certify that:</p>
                            <p>1. The said records have been properly prepared, signed by the required officers of the Company and maintained as per the relevant provisions of the Companies Act, 2013 and were found to be in order ;</p>
                            <p>2. All the required attachments have been completely and legibly attached to this form To be digitally signed by </p>
                        </div>
                    </div>


                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">Category [In whole time practice]</div>
                        <div class="col-xs-12 col-sm-5 col-md-5 form-row">
                            &nbsp;<input type="radio" name="category" class="" value="Chartered accountant (in whole-time practice)" required="">&nbsp; Chartered accountant&nbsp; <input type="radio" name="category" value="Cost accountant (in whole-time practice)" required="">&nbsp; Cost accountant or&nbsp; <input type="radio" name="category" value="Company secretary (in whole-time practice)" required="">&nbsp;Company secretary
                        </div>
                        <div class="col-xs-12 col-sm-2 col-md-2 bold form-row CERT_PRACTICE_NO1 pcsContainer" style="display: none;">
                            Company Secretary
                        </div>
                        <div class="col-xs-12 col-sm-2 col-md-2 form-row CERT_PRACTICE_NO1 pcsDrpContainer" style="text-align: center; display: none;">
                            <select name="nameOfPcs" style="width:100%" id="nameofpcs" readonly="readonly" class="form-select"><option value="" selected="">Select PCS</option><option value="265">PAKSHAL KIRAN SHAH (CHARTERED ACCOUNTANT)</option><option value="439">Pooja Gandhi (Practicing Company Secretary)</option></select>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">Whether associate or fellow</div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                            &nbsp;<input type="radio" name="associateOrFellow" class="" value="Associate" required="">&nbsp; Associate&nbsp; <input type="radio" name="associateOrFellow" value="Fellow" required="">&nbsp;Fellow&nbsp;
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold CERT_PRACTICE_NO1 memberShipContainer" style="display: none;">
                            Membership number or Certificate of practice number
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row CERT_PRACTICE_NO1 txtMemberShipContainer" style="display: none;">
                            <input type="text" name="membershipNumber" class="form-control membershipnumber num" id="membershipnumber" value="">
                        </div>
                    </div>
                    <template id="rowTemplate">
                        <div class="row mt-3">
                            <div class="col-xs-12 col-sm-1 col-md-1 form-row" align="center">
                                <!-- Sr. No will be updated dynamically -->
                            </div>
                            <div class="col-xs-12 col-sm-10 col-md-10 form-row">
                                <input type="file" name="optionalAttachment" class="attachment-file">
                            </div>
                            <div class="col-xs-12 col-sm-1 col-md-1" align="center">
                                <button type="button" class="btn btn-danger remove-row" style="padding: 4px 7px;">
                                    <i class="fa fa-times" style="margin:0px 0px 0px 0px  !important;"></i>
                                </button>
                            </div>
                        </div>
                    </template>
                </form>
            </div>
        </div>
    </div>


    <div class="col-m-12 mt-3">
        <button class="btn btn-md btn-primary" style="float: right;" onclick="save(event)">
            Submit
        </button>
    </div>

</div>



<script>
    document.getElementById("numberCharged").addEventListener("input", function () {
      const count = parseInt(this.value) || 0;
      const container = document.getElementById("personTablesContainer");
      container.innerHTML = ""; // clear previous tables

      for (let i = 1; i <= count; i++) {
        const formBlock = document.createElement("div");
        formBlock.className = "p-3 my-4";
        formBlock.style.background = "#f8d7da"; // matching the pink background in your screenshot
        formBlock.style.border = "1px solid #f5c6cb";
        formBlock.innerHTML = `
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">*Officer in default</label>
              <select class="form-control">
                <option>Select</option>
                <option>Director</option>
                <option>Manager</option>
                <option>Company Secretary</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Name</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-12 mb-3">
              <label class="form-label">*Provision(s) of the Companies Act to which the consent relates</label>
              <select class="form-control">
                <option>-- Select --</option>
                <option>Section 166</option>
                <option>Section 203</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Director Identification Number (DIN) / PAN</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Designation</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Date of Birth</label>
              <input type="date" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Name</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Qualification</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Father’s or Husband’s Name</label>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="relation_${i}" value="father">
                <label class="form-check-label">Father’s name</label>
              </div>
              <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="relation_${i}" value="husband">
                <label class="form-check-label">Husband’s Name</label>
              </div>
            </div>

            <!-- Address Section -->
            <div class="col-md-6 mb-3">
              <label class="form-label">*Address Line 1</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Address Line 2</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Country</label>
              <select class="form-control">
                <option>Select Country</option>
                <option>India</option>
                <option>Other</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*City</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Pin Code/Zip code</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Area/Locality</label>
              <select class="form-control">
                <option>Select Locality</option>
              </select>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*District</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*State/UT</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Mobile Number</label>
              <input type="text" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Email ID</label>
              <input type="email" class="form-control">
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">*Nationality</label>
              <input type="text" class="form-control">
            </div>
          </div>
        `;
        container.appendChild(formBlock);
      }
    });
</script>



<script>
    $(document).ready(function () {
        $("#numberCharged").on("input", function () {
            this.value = this.value.replace(/[^0-9]/g, "");

            const val = $(this).val().trim();
            if (val !== "" && parseInt(val) > 0) {
                $("input[name='permissionWithdrawn']").prop("disabled", false).css("cursor", "pointer");
            } else {
                $("input[name='permissionWithdrawn']").prop("disabled", true).prop("checked", false).css("cursor", "not-allowed");
            }
        });
    });
</script>

<script>
    $(document).ready(function () {
        $("input[name='numberCharged']").on("input", function () {
            const val = $(this).val().trim();

            if (val !== "" && !isNaN(val) && parseInt(val) > 0) {
                $("input[name='permissionWithdrawn']").prop("disabled", false).css("cursor", "pointer");
            } else {
                $("input[name='permissionWithdrawn']").prop("disabled", true).prop("checked", false).css("cursor", "not-allowed");
            }
        });
    });
</script>


@section Scripts {
    <script>

        var frm = {
            id: 0,
            companyId: 0,

            cin: "",
            companyName: "",
            companyAddress: "",
            companyEmail: "",

            //Part 1
            numberCharged: 0,
            permissionWithdrawn: "",
            consentDate: "",
            resolutionDate: "",

            //Part 2
            copyAttachment: "",
            optionalAttachment: "",
            directorResolution: "",
            directorDate: "",
            certificationDeclaration: "",
            dinOfPersonCharged: "",
            designation: "",
            din: "",
            category: "",
            nameOfPcs: "",
            associateOrFellow: "",
            membershipNumber: 0

        }

        var voFrm = {
            id: 'required',
            companyId: 'required',
        };

        var vfFrm = null;

        $(document).ready(function () {

            $("#part2").hide();
            $("#part3").hide();
            $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                var active = $(e.target).attr('role');
                $("#part1").hide();
                $("#part2").hide();
                $("#part3").hide();
                $("#" + active).show();

            });

            load()

        })


        $("#attachmentadd").on("click", function () {
            let rowCount = $("#equity8").children(".row").length;
            let counter = rowCount + 1;

            let template = document.getElementById("rowTemplate");
            let newRow = template.content.cloneNode(true);
            $(newRow)
                .find("div.col-xs-12.col-sm-1.col-md-1.form-row")
                .text(counter + ".");
            $(newRow)
                .find("input[type='file']")
                .attr("id", "attachmentfile_" + counter);

            $("#equity8").append(newRow);
            $("#equity8").data("counter", counter);
        });

        $(document).on("click", ".remove-row", function () {
            if ($("#equity8").children(".row").length > 1) {
                $(this).closest(".row").remove();
                $("#equity8 .row").each(function (index) {
                    $(this)
                        .find("div.col-xs-12.col-sm-1.col-md-1.form-row")
                        .text((index + 1) + ".");
                });

                let rowCount = $("#equity8").children(".row").length;
                $("#equity8").data("counter", rowCount);
            } else {
                alert("At least one row must remain.");
            }
        });
        $(document).on("change", "[name=category]", function () {
            let selectedValue = $(this).val();
            if (selectedValue === "Company secretary (in whole-time practice)") {
                $(".pcsContainer").show();
                $(".pcsDrpContainer").show();
                $(".memberShipContainer").show();
                $(".txtMemberShipContainer").show();
            } else {
                $(".pcsContainer").hide();
                $(".pcsDrpContainer").hide();
                $(".memberShipContainer").hide();
                $(".txtMemberShipContainer").hide();
            }
        });

            function save(event) {
                event.preventDefault();

                // let isValid = true;
                // if (!vfFrm1.form()) isValid = false;

                // if (!isValid) return;

                var obj = getObj(frm, '#frm');
                $._post(`@R.ApiUrl/@ViewBag.ctrl`, obj).then(x => {
                    console.log(x)
                    if (x.status) {
                        window.location = `@Url.Action("GNL3", "Form")`
                    } else {
                        swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: x.message
                        })
                    }
                })

            }

            function load() {
                if (@ViewBag.id > 0) {
                    $._get(`@R.ApiUrl/@ViewBag.ctrl/${@ViewBag.id}`).then(x => {
                        frm = x
                        setObj(x, "#frm")
                    })
                }
                var company = localStorage.getItem("comp_id");
                if (company === null || company === undefined || company === "0") {
                    alert("Please select Company")
                    window.location = `@Url.Action("GNL3", "Form")`
                    return;
                }
                $._get(`@R.ApiUrl/Company/${company} `).then(x => {
                    $("[name='companyId']").val(x.id);
                    $("[name='cin']").val(x.cin);
                    $("[name='companyName']").val(x.companyName);
                    $("[name='companyAddress']").val(x.address);
                    $("[name='companyEmail']").val(x.email);
                })
            }

    </script>

}
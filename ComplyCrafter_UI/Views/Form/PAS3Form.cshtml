<style>
    .textheader a {
        color: blue;
        text-decoration: none !important;
    }

    .textheader:hover a {
        color: red !important;
        cursor: pointer;
    }
</style>

<div class="row m-auto" id="frm">
    <div class="card " style="flex-direction:row;">
        <div class=" col-lg-12">
            <div class="card-header ">
                <h3>
                    Form No.PAS-3
                </h3>
            </div>
            <div class="card-body" style="padding:0px 25px;">
                <p>
                    Return of Allotment <br />
                    [Pursuant to section 39(4) and 42 (9) of the Companies Act, 2013 and rule 12 and 14 of the Companies (Prospectus and Allotment of Securities) Rules, 2014]
                </p>
            </div>
            <div class="textheader my-4 mx-3">
                <a href="https://www.mca.gov.in/content/dam/mca-af-forms/instruction-kits/Instruction_Kit_PAS-3.pdf" target="_blank">

                    Refer instruction kit for filing the form
                </a>
            </div>
        </div>
    </div>

    <div class="content-wrapper">
        <div class="container-fluid">
            <main role="main" class="pb-3">
                <div class="row">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between" style="padding: 15px 30px 10px;">
                            <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 active " href="javascript:;" role="part1" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Company Details
                                        </span>
                                    </a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 " href="javascript:;" role="part3" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Allotments Details
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 " href="javascript:;" role="part4" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Captial structure
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 " href="javascript:;" role="part2" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Declaration & Attachments
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>
    <div id="part4">
        <div class="card">
            <div class="row" style="padding:20px;">
                <label style="font-weight:bolder;text-decoration: underline;text-transform: uppercase;">Capital structure post allotment</label>  <br>
                <label style="font-weight:bolder;text-decoration: underline;" class="my-3">20. Capital structure of the company after taking into consideration the above allotment(s) of shares:</label>
                <div class="tableContainer">
                </div>
                <div class="row" style="height: auto;">
                    <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;background-color: #f3d5d5;">
                        <label style="border-bottom:1px solid black; display:inline-block;">Equity Share Capital</label>
                        <div class="row my-2" style="width: 100%;">
                            <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">
                                Number of Classes
                            </div>
                            <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                                <input type="text" name="noOfClassesEquity" id="noOfClassesEquity" class="form-control num" value="" required="">
                            </div>
                        </div>
                        <div id="tanfieldequity" style="">
                        </div>
                    </div>
                </div>
                <div class="row" style="height: auto;">
                    <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;background-color: bisque; ">
                        <label style="border-bottom:1px solid black; display:inline-block;">Preference share capital</label>
                        <div class="row my-2" style="width: 100%;">
                            <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">
                                Number of Classes
                            </div>
                            <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                                <input type="text" name="noOfClassesPreference" id="noOfClassesPreference" class="form-control num" value="">
                            </div>
                        </div>
                        <div id="tanfieldpref">
                        </div>
                    </div>
                </div>
                <div class="row" style="height: auto;">
                    <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;background-color: #f3d5d5; padding:12px;">
                        <label>Unclassfied shares</label>
                        <table border="1" class="table-hover" style="width: 100%">
                            <thead>
                                <tr>
                                    <th style="text-align: left;vertical-align: middle;font-size: inherit;font-size: smaller; background-color:#8e949a;">Particulars</th>
                                    <th style="text-align: left;vertical-align: middle;font-size: inherit;font-size: smaller; background-color:#8e949a;">Total Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="font-size: smaller;">
                                    <td style="font-weight: bold;">Number of Unclassfied shares</td>
                                    <td><input type="text" name="noOfUnclassified" id="NoOfUnclassified" class="form-control num" maxlength="20" value="" required=""></td>
                                </tr>
                                <tr style="font-size: smaller;">
                                    <td style="font-weight: bold;">Total amount of (in INR) Unclassfied shares</td>
                                    <td><input type="text" name="totalUnclassified" id="totalUnclassified" class="form-control num" maxlength="20" value="" required=""></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <label style="font-weight:bolder;text-decoration: underline;text-transform: uppercase;" class="my-2 mb-2">Capital structure post allotment - Debt</label>
                <div class="row" style="height: auto;">
                    <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;background-color: bisque; padding:12px;">
                        <label>Debt Structure of the company after taking into consideration the above allotment(s) of debenture / other security:</label>
                        <table border="1" class="table-hover" style="width: 100%">
                            <thead>
                                <tr>
                                    <th style="text-align: left;vertical-align: middle;font-size: inherit;font-size: smaller; background-color:#8e949a;">Particulars</th>
                                    <th style="text-align: left;vertical-align: middle;font-size: inherit;font-size: smaller; background-color:#8e949a;">Total Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="font-size: smaller;">
                                    <td style="font-weight: bold;">Debentures</td>
                                    <td><input type="text" name="debentures" id="debentureCol3" class="form-control num" maxlength="20" value=""></td>
                                </tr>
                                <tr style="font-size: smaller;">
                                    <td style="font-weight: bold;">Secured Loans </td>
                                    <td><input type="text" name="loanSecured" id="securedLoansCol3" class="form-control num" maxlength="20" value=""></td>
                                </tr>
                                <tr style="font-size: smaller;">
                                    <td style="font-weight: bold;">Others, specify</td>
                                    <td><input type="text" name="others" id="otherCol3" class="form-control num" maxlength="20" value=""></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="part2" class="p-0">
        <div class="card  p-0">

            <form action="" role="form" id="fupForm2" method="post" accept-charset="utf-8" enctype="multipart/form-data" style="padding:15px;">

                <div class="row">
                    <div class="  d-flex justify-content-between mx-1 pt-2 mb-3 ">
                        <p class="card-title mb-0 " style="margin-top:1px; border-bottom:1px solid black;">
                            Attachments
                        </p>
                    </div>
                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-12 col-md-1 bold form-row" align="center">
                            Sr. No
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-10 bold form-row">
                            (a) List of Allottees
                        </div>
                    </div>

                    <div class="row" id="roweq1">
                        <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                            1.
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-11 form-row">
                            <input type="file" name="allotteesList" id="attachmentfile_1" class="1" accept=".pdf,.xlsx">
                        </div>
                    </div>



                    <div class="row mt-3">
                        <div class="col-xs-12 col-sm-12 col-md-1 bold form-row" align="center">
                            Sr. No
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-10 bold form-row">
                            Add another attachment
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                            <button type="button" name="attachmentadd" id="addOtherAttchment" class="btn-sm btn-primary"><i class=" fa-plus"></i></button>
                        </div>
                    </div>
                    <div class="anotherAttachmentContainer">
                        <div class="row" id="roweq1">
                            <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                                1.
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-11 form-row">
                                <input type="file" name="anotherAttachment" id="attachmentfile_1" class="1" accept=".pdf,.xlsx">
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3 ">
                        <div class="col-xs-12 col-sm-12 col-md-1 bold form-row" align="center">
                            Sr. No
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-10 bold form-row">
                            (d) Optional attachment(s)- if any
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                            <button type="button" name="attachmentadd" id="addOptionalAttachmentBtn" class="btn-sm btn-primary"><i class=" fa-plus"></i></button>
                        </div>
                    </div>
                    <div class="optionalAttachmentContainer">
                        <div class="row" id="roweq1">
                            <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                                1.
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-11 form-row">
                                <input type="file" name="optionalAttachment" id="attachmentfile_1" class="1" accept=".pdf,.xlsx">
                            </div>
                        </div>
                    </div>

                    <div class="  d-flex justify-content-between mx-1 pt-2 mb-3 ">
                        <p class="card-title mb-0 " style="margin-top:1px; border-bottom:1px solid black;">
                            Declaration
                        </p>
                    </div>

                    <div class="row" style="height: auto;">
                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;padding: 10px;">
                            <p style="text-align: justify;"> I am authorized by the Board of Directors of the Company vide resolution no * &nbsp;
                                <input type="text" name="resolutionNumber" id="resolutionNumber" style="width: 10%;" class="numbers" required="" placeholder="Resolution Number" value=""> &nbsp; dated * &nbsp;
                                <input type="date" name="resolutionDate" id="declarationDate" style="width: 20%;" class="datepicker hasDatepicker" required="" placeholder="" autocomplete="off" value="">
                                &nbsp; to sign this form and declare that all the requirements of Companies Act, 2013 and the rules made thereunder in respect of the subject matter of this form and matters incidental thereto have been complied with. Whatever is stated in this form and in the attachments thereto is true, correct and complete and no information material to the subject matter of this form has been suppressed or concealed and is as per the original records maintained by the promoters subscribing to the Memorandum of Association and Articles of Association. </p>

                            <p style="text-align: justify;">It is further declared and verified that:</p>
                            <ol style="">
                                <li style="text-align: justify;">All the required attachments have been completely, correctly and legibly attached to this form.</li>
                                <li style="text-align: justify;"> The list of allottees is correct and complete as per records of the company.</li>
                                <li style="text-align: justify;">Where the securities are issued other than cash, the contract as well as list of allottees and any other contract of sale, or a contract for services or other consideration in respect of which that allotment is made is attached herewith. If not, then an attachment has been attached by the company mentioning all the particulars of the contract in writing.</li>
                                <li style="text-align: justify;">The return of allotment in form PAS-2 is not pending for any such allotment of securities, prior to the date of allotment mentioned in field 6 of the form.</li>
                            </ol>
                        </div>
                    </div>

                    <div class="row" style="height: auto;">
                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;padding: 10px;">
                            <label style="text-decoration: none;font-weight: normal;"> &nbsp; <input type="checkbox" name="declaration" id="checkbox1" value="Y" disabled=""> &nbsp; I hereby declare that, in respect of private placement the company has: </label>
                            <ol style="">
                                <li style="text-align: justify;">Allotted securities to less than two hundred persons in aggregate in a financial year excluding exempted categories;</li>
                                <li style="text-align: justify;"> Offered such securities through private placement offer letter and no prospectus or any other public advertisement has been issued for the same;</li>
                                <li style="text-align: justify;">Completed allotment in respect of earlier private placement offers;</li>
                                <li style="text-align: justify;">Received money payable on subscription of such securities through cheque or demand draft or other banking channels but not in cash;</li>
                                <li style="text-align: justify;">Made such offers only to the persons whose names were recorded by the company prior to such invitation and such persons have received such offer by name;</li>
                                <li style="text-align: justify;">Maintained a complete record of such offers and acceptances in Form No. PAS-5</li>
                            </ol>
                        </div>
                    </div>

                    <div class="col-md-6 my-3">
                        <label class="form-label">
                            *Designation
                        </label>
                        <select name="designation" id="designation" class="form-select " required="">
                            <option value="">Select Designation</option>
                            <option value="Director" style="">Director</option>
                            <option value="Manager" style="">Manager</option>
                            <option class="Secretary" style="">Secretary</option>
                            <option value="Company Secretary" style="">Company Secretary</option>
                            <option value="CFO" style="">CFO</option>
                            <option value="CEO" style="">CEO</option>
                            <option value="Insolvency Resolution Professional" style="display:none;">Insolvency Resolution Professional</option>
                            <option value="Resolution Professional" style="display:none;">Resolution Professional</option>
                            <option value="Liquidator" style="display:none;">Liquidator</option>
                        </select>
                    </div>
                    <div class="col-md-6 my-3">
                        <label class="form-label">
                            *Signatory
                        </label>
                        <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="text" name="signatory" placeholder="" class="form-control" value="">
                        <div class="invalid-feedback"></div>
                    </div>

                    <div class="  d-flex justify-content-between mx-1 pt-2 mb-3 ">
                        <p class="card-title mb-0 " style="margin-top:1px; border-bottom:1px solid black;">
                            Certificate by Practicing Professionals
                        </p>
                    </div>
                    <div class="row" style="height: auto;">
                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="height: auto;padding: 10px;">
                            <p style="text-align: justify;">I declare that I have been duly engaged for the purpose of certification of this form. It is hereby certified that I have gone through the provisions of the Companies Act, 2013 and Rules thereunder for the subject matter of this form and matters incidental thereto and I have verified the above particulars (including attachment(s)) from the original/certified records maintained by the Company/applicant which is subject matter of this form and found them to be true, correct and complete and no information material to this form has been suppressed.</p>
                            <p style="text-align: justify;">I further certify that:</p>
                            <ol style="">
                                <li style="text-align: justify;">The said records have been properly prepared, signed by the required officers of the Company and maintained as per the relevant provisions of the Companies Act, 2013 and were found to be in order;</li>
                                <li style="text-align: justify;"> All the required attachments have been completely and legibly attached to this form.</li>
                            </ol>
                            <p style="text-align: justify;">I hereby certify that I have gone through the agreements/ contracts entered into by the Company as applicable for allotment of securities for consideration other than cash, the details of which have been provided in the form, and found them to be true, correct and complete and no material information is suppressed.</p>
                        </div>
                    </div>
                    <div class="row my-3">
                        <div class="col-xs-12 col-sm-3 col-md-8 form-row">
                            <span class="form-label">Category (in whole time practice)</span>
                            <input type="radio" name="category" value="Chartered Accountant (in whole-time practice)">&nbsp; Chartered accountant &nbsp; &nbsp; &nbsp;
                            <input type="radio" name="category" value="Company Secretary (in whole-time practice)">&nbsp; Company Secretary &nbsp; &nbsp; &nbsp;
                            <input type="radio" name="category" value="Cost Accountant (in whole-time practice)">&nbsp; Cost Accountant
                        </div>
                        <div class="col-xs-2 col-sm-2 col-md-2 bold form-row nameofpcs" style="display: none;">
                            Company Secretary
                        </div>
                        <div class="col-xs-2 col-sm-2 col-md-2 form-row nameofpcs" style="display: none;">
                            <select name="nameOfPcs" id="nameofpcs" class="form-select" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" required="required">
                                <option value="">Select PCS</option>
                                <option value="265">PAKSHAL KIRAN SHAH (CHARTERED ACCOUNTANT)</option>
                            </select>
                        </div>
                    </div>

                    <div class="row my-2">
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">
                            Whether associate or fellow
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                            &nbsp;&nbsp;
                            <input type="radio" name="assososiateOrFellow" value="Associate">&nbsp;Associate &nbsp;<input type="radio" name="assososiateOrFellow" value="Fellow">&nbsp;Fellow
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row bold">
                            Membership number or Certificate of practice number
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 form-row">
                            <input type="text" name="membershipNumber" id="Membership_number" class="form-control num" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" value="" required="required">
                        </div>

                    </div>
                </div>
            </form>
        </div>
    </div>

    <div id="part1" class="p-0">
        @*  tab-1 *@
        <div class="col-md-12 p-0">
            <div class="accordion" id="companyAccordion">
                <div class="accordion-item">
                    <div id="collapseDetails" aria-labelledby="detailsHeading" data-bs-parent="#companyAccordion">
                        <div class="card">
                            <div class="card-body">
                                <form id="frmCompanyDetails">
                                    <input type="hidden" class="num" value="0" name="id" />
                                    <input type="hidden" class="num" value="0" name="companyId" />
                                    <div class="row">
                                        <div class="  d-flex justify-content-between mx-1 pt-3 ">
                                            <p class="card-title mb-0 " style="margin-top:1px; border-bottom:1px solid black;">
                                                1. Company lnformation
                                            </p>
                                        </div>
                                        <div class="col-md-6 my-3">
                                            <label class="form-label">
                                                (a). *Corporate Identity Number(CIN)
                                            </label>
                                            <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="text" placeholder="U22219MH2022PTC375586" class="form-control" value="" name="cin" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-3">
                                            <label class="form-label">(b) *Name of the Company</label>
                                            <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="text" placeholder="AKSHAY GRAPHICS PRIVATE LIMITED" class="form-control " value="" name="companyName" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div><a href="c:\users\admin\source\repos\complycrafter\complycrafter_ui\views\form\runllp.cshtml">c:\users\admin\source\repos\complycrafter\complycrafter_ui\views\form\runllp.cshtml</a>
                                        <div class="col-md-12 my-3">
                                            <label class="form-label">(c) *Registered office address</label>
                                            <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="text" placeholder="SHOP NO 3 VERTEX VIKAS CHS LTD   WING A SIR M V RD BHD POLICE STN ANDHERI, MUMBAI, Mumbai City, Maharashtra, India, 400069" class="form-control" value="" name="companyAddress" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-3">
                                            <label class="form-label">(c) *email id</label>
                                            <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="text" placeholder="akshaygraphics69@gmail.com" class="form-control " value="" name="companyEmail" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-3">
                                            <label class="form-label">2 *Number of allotments</label>
                                            <input style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" type="number" placeholder="" class="form-control num" value="" name="numberOfAllotments">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <template id="attachmentRowTemplate">
        <div class="row attachmentRow">
            <div class="col-xs-12 col-sm-12 col-md-1" align="center">#.</div>
            <div class="col-xs-12 col-sm-12 col-md-10">
                <input type="file" name="anotherAttachment" accept=".pdf,.xlsx">
            </div>
            <div class="col-xs-12 col-sm-12 col-md-1" align="center">
                <button type="button" class="removeAttachmentBtn">Remove</button>
            </div>
        </div>
    </template>

    <template id="optionalAttachmentRowTemplate">
        <div class="row attachmentRow">
            <div class="col-xs-12 col-sm-12 col-md-1" align="center">#.</div>
            <div class="col-xs-12 col-sm-12 col-md-10">
                <input type="file" name="optionalAttachment" accept=".pdf,.xlsx">
            </div>
            <div class="col-xs-12 col-sm-12 col-md-1" align="center">
                <button type="button" class="removeAttachmentBtn">Remove</button>
            </div>
        </div>
    </template>

    <div class="col-m-12 mt-3">
        <button class="btn btn-md btn-primary" style="float: right;" onclick="save(event)">
            Submit
        </button>
    </div>
</div>


@section Scripts {
    <script>

        var frm = {
            id: 0,
            companyId: 0,

            cin: "",
            companyName: "",
            companyAddress: "",
            companyEmail: "",
            numberOfAllotments: 0, // Class: num
            noOfClassesEquity: 0, // Class: num
            noOfClassesPreference: 0,
            noOfUnclassified: 0, // Class: num
            totalUnclassified: 0, // Class: num
            debentures: 0, // Class: num
            loanSecured: 0, // Class: num
            others: 0, // Class: num
          
            //Table
            // equityAuthorizedCapital: "",
            // equityIssuedCapital: "",
            // equityPaidupCapital: "",

            // File upload fields
            allotteesList: "",
            anotherAttachment: "",
            optionalAttachment: "",
            resolutionNumber: "",
            resolutionDate: "",
            designation: "",
            signatory: "",
            category: "",
            nameOfPcs: "",
            assososiateOrFellow: "",
            membershipNumber: 0,

        }

        var voFrm = {
            id: 'required',
            companyId: 'required',
        };

        var vfFrm = null;

        $(document).ready(function () {

            $("#part2").hide();
            $("#part3").hide();
            $("#part4").hide();
            $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                var active = $(e.target).attr('role');
                $("#part1").hide();
                $("#part2").hide();
                $("#part3").hide();
                $("#part4").hide();
                $("#" + active).show();

            });

            load()
            vfFrm = $('#frm').validate({ rules: voFrm, onsubmit: () => { console.log('submit') } })

        })
        function updateSerialNumbers(containerSelector) {
            $(containerSelector).find('.row').each(function (index) {
                $(this).find("div:first").text((index + 1) + ".");
            });
        }
        var rowTemplate = $("#attachmentRowTemplate").html();
        $(document).on("click", "#addOtherAttchment", function () {
            $(".anotherAttachmentContainer").append(rowTemplate);
            updateSerialNumbers(".anotherAttachmentContainer");
        });
        var rowOptionalTemplate = $("#optionalAttachmentRowTemplate").html();
        $(document).on("click", "#addOptionalAttachmentBtn", function () {
            $(".optionalAttachmentContainer").append(rowOptionalTemplate);
            updateSerialNumbers(".optionalAttachmentContainer");
        });

        $(document).on("click", ".removeAttachmentBtn", function () {
            $(this).closest(".attachmentRow").remove();
            updateSerialNumbers(".anotherAttachmentContainer");
            updateSerialNumbers(".optionalAttachmentContainer");
        });

        $(document).on("change", "[name='category']", function () {
            let checked = $(this).val();

            if (checked == "Company Secretary (in whole-time practice)") {
                $(".nameofpcs").show();

            } else {
                $(".nameofpcs").hide();
            }
        });

        $(document).on('input', '#noOfClassesEquity', function () {
            addShareRow("noOfClassesEquity")
        });
        $(document).on("input", "#noOfClassesPreference", function () {
            addShareRow("noOfClassesPreference")
        })

        function addShareRow(type) {
            const inputValue = $("#"+type).val().trim();
            let number = parseInt(inputValue, 10);

            if (isNaN(number) || number <= 0 || number >= 100) {
                alert("Please enter a number greater than 0 and less than 100.");
                $("#" + type).val('');
                if (type == "noOfClassesEquity") {
                    $('#tanfieldequity').empty();
                }else{
                    $('#tanfieldpref').empty();

                }
               
                return;
            }

            if (type == "noOfClassesEquity") {
                $('#tanfieldequity').empty();

                for (let i = 1; i <= number; i++) {
                    const template = `
                                                                <div class="row removeeqtrow mt-4" id="rowtan10_${i}">
                                                                    <div class="col-lg-11 col-md-11 col-sm-11 col-xs-11" style="width: 95%;">
                                                                        <table border="1" class="table-hover" style="width: 100%">
                                                                            <thead>
                                                                                <tr >
                                                                                    <th style="text-align: left;font-size: inherit;vertical-align: middle;width: 30%;font-size: smaller;">
                                                                                        Class of shares &nbsp; &nbsp;
                                                                                       <select name="classOfShares" class="form-control" id="classOfSharesEquity_${i}" style="width: 60%;">
                                                                                            <option value="">Select Class</option>
                                                                                            <option value="Others">Others</option>
                                                                                        </select>
                                                                                    </th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;">Authorized capital</th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;">Issued capital </th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;">Subscribed capital </th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;">Paid up capital</th>
                                                                                </tr>
                                                                                <tr id="otherclasshide_${i}" style="display: none;">
                                                                                    <th style="text-align: left;font-size: smaller;vertical-align: middle;width: 30%">
                                                                                        <input type="text" name="otherclasseqt" id="otherclasseqt_${i}" class="form-control">
                                                                                    </th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                    <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                </tr>
                                                                                        <tr id="otherclasshide_4" style="display: table-row;">
                                                                                        <th style="text-align: left;font-size: smaller;vertical-align: middle;width: 30%">
                                                                                        <input type="text" name="otherclass" id="otherclasseqt_4" class="form-control" required="required">
                                                                                        </th>
                                                                                        <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                        <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                        <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                        <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                        </tr>
                                                                            </thead>
                                                                            <tbody id="equityTable">
                                                                                        <tr style="font-size: smaller;" class="equityTable">
                                                                                    <td style="display:none">
                                                                                    <input type="hidden" class="num" value="0" name="id" />
                                                                                    <input type="hidden" class="num" value="0" name="parentId" />
                                                                                    </td>
                                                                                    <td>Number of equity shares</td>
                                                                                    <td>
                                                                                        <input type="text" name="authorizedCapital" id="equityAuthorizedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="issuedCapital" id="equityIssuedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="subscribedCapital" id="equitySubscribedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="paidUpCapital" id="equityPaidupCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                </tr>
                                                                                <tr style="font-size: smaller;">
                                                                                    <td>Nominal amount per share (in INR)</td>
                                                                                    <td>
                                                                                        <input type="text" name="nominalAmntPerShare" id="nominalAmountPerShare_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="nominalAmountPerShareIssue" id="nominalAmntPerShareIssue_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="nominalAmountPerShareSub" id="nominalAmntPerShareSub_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                    <td>
                                                                                        <input type="text" name="nominalAmountPerSharePaid" id="nominalAmntPerSharePaid_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                    </td>
                                                                                </tr>
                                                                                <tr style="font-size: smaller;">
                                                                                    <td>Total amount of equity share (in INR)</td>
                                                                                    <td><input type="text" name="totalAmountShares" id="totalAmntShares_${i}" class="form-control" readonly=""></td>
                                                                                    <td><input type="text" name="totalAmountSharesIssue" id="totalAmntSharesIssue_${i}" class="form-control" readonly=""></td>
                                                                                    <td><input type="text" name="totalAmountSharesSub" id="totalAmntSharesSub_${i}" class="form-control" readonly=""></td>
                                                                                    <td><input type="text" name="totalAmountSharesPaid" id="totalAmntSharesPaid_${i}" class="form-control" readonly=""></td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                    <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1" align="center" style="width: 5%;">
                                                                                        <button type="button" name="remove" class="btn btn-danger removeequity" id="${i}" onclick="removeEquityShare(this)">X</button>
                                                                    </div>
                                                                </div>
                                                            `;
                    $('#tanfieldequity').append(template);
                }

            } else {
                $('#tanfieldpref').empty();

                for (let i = 1; i <= number; i++) {
                    const template = `
                                                                        <div class="row removeprefrow mt-4" id="rowtan10_${i}">
                                                                            <div class="col-lg-11 col-md-11 col-sm-11 col-xs-11" style="width: 95%;">
                                                                                <table border="1" class="table-hover" style="width: 100%">
                                                                                    <thead>
                                                                                        <tr >
                                                                                            <th style="text-align: left;font-size: inherit;vertical-align: middle;width: 30%;font-size: smaller;">
                                                                                                Class of shares &nbsp; &nbsp;
                                                                                                                <select name="classOfShares" class="form-control" id="classOfSharesEquity_${i}" style="width: 60%;">
                                                                                                    <option value="">Select Class</option>
                                                                                                    <option value="Others">Others</option>
                                                                                                </select>
                                                                                            </th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;">Authorized capital</th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;">Issued capital </th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;">Subscribed capital </th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;">Paid up capital</th>
                                                                                        </tr>
                                                                                        <tr id="otherclasshide_${i}" style="display: none;">
                                                                                            <th style="text-align: left;font-size: smaller;vertical-align: middle;width: 30%">
                                                                                                <input type="text" name="otherclasseqt[]" id="otherclasseqt_${i}" class="form-control">
                                                                                            </th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                            <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                        </tr>
                                                                                                <tr id="otherclasshide_4" style="display: table-row;">
                                                                                                <th style="text-align: left;font-size: smaller;vertical-align: middle;width: 30%">
                                                                                                <input type="text" name="otherclasseqt[]" id="otherclasseqt_4" class="form-control" required="required">
                                                                                                </th>
                                                                                                <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                                <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                                <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                                <th style="text-align: left;vertical-align: middle;font-size: smaller;"></th>
                                                                                                </tr>
                                                                                    </thead>
                                                                                            <tbody id="preferenceTable">
                                                                                                        <tr style="font-size: smaller;" class="preferenceTable">
                                                                                            <td style="display:none">
                                                                                            <input type="hidden" class="num" value="0" name="id" />
                                                                                            <input type="hidden" class="num" value="0" name="parentId" />
                                                                                            </td>
                                                                                            <td>Number of equity shares</td>
                                                                                            <td>
                                                                                              <input type="text" name="authorizedCapital" id="equityAuthorizedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                              <input type="text" name="issuedCapital" id="equityIssuedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                               <input type="text" name="subscribedCapital" id="equitySubscribedCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                               <input type="text" name="paidUpCapital" id="equityPaidupCapital_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr style="font-size: smaller;">
                                                                                            <td>Nominal amount per share (in INR)</td>
                                                                                            <td>
                                                                                               <input type="text" name="nominalAmntPerShare" id="nominalAmntPerShare_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                               <input type="text" name="nominalAmntPerShareIssue" id="nominalAmntPerShareIssue_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="text" name="nominalAmntPerShareSub" id="nominalAmntPerShareSub_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                            <td>
                                                                                                <input type="text" name="nominalAmntPerSharePaid" id="nominalAmntPerSharePaid_${i}" class="form-control numbers num" onkeyup="calculateequityshare(${i})" required="">
                                                                                            </td>
                                                                                        </tr>
                                                                                        <tr style="font-size: smaller;">
                                                                                            <td>Total amount of equity share (in INR)</td>
                                                                                            <td><input type="text" name="totalAmountShares" id="totalAmntShares_${i}" class="form-control  num" readonly=""></td>
                                                                                            <td><input type="text" name="totalAmountSharesIssue" id="totalAmntSharesIssue_${i}" class="form-control num" readonly=""></td>
                                                                                            <td><input type="text" name="totalAmountSharesSub" id="totalAmntSharesSub_${i}" class="form-control num" readonly=""></td>
                                                                                            <td><input type="text" name="totalAmountSharesPaid" id="totalAmntSharesPaid_${i}" class="form-control" readonly=""></td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                            <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1" align="center" style="width: 5%;">
                                                                                        <button type="button" name="remove" class="btn btn-danger removeequity" id="${i}" onclick="removepreferenceShare(this)">X</button>
                                                                            </div>
                                                                        </div>
                                                                    `;
                    $('#tanfieldpref').append(template);
                }

            }
        }

        function calculateequityshare(i) {
            // For Authorized Capital
            var authorized = parseFloat($("#equityAuthorizedCapital_" + i).val()) || 0;
            var nominal = parseFloat($("#nominalAmntPerShare_" + i).val()) || 0;
            var totalAuthorized = authorized * nominal;
            $("#totalAmntShares_" + i).val(totalAuthorized.toFixed(2));

            // For Issued Capital
            var issued = parseFloat($("#equityIssuedCapital_" + i).val()) || 0;
            var nominalIssue = parseFloat($("#nominalAmntPerShareIssue_" + i).val()) || 0;
            var totalIssued = issued * nominalIssue;
            $("#totalAmntSharesIssue_" + i).val(totalIssued.toFixed(2));

            // For Subscribed Capital
            var subscribed = parseFloat($("#equitySubscribedCapital_" + i).val()) || 0;
            var nominalSub = parseFloat($("#nominalAmntPerShareSub_" + i).val()) || 0;
            var totalSubscribed = subscribed * nominalSub;
            $("#totalAmntSharesSub_" + i).val(totalSubscribed.toFixed(2));

            // For Paid Up Capital
            var paidUp = parseFloat($("#equityPaidupCapital_" + i).val()) || 0;
            var nominalPaid = parseFloat($("#nominalAmntPerSharePaid_" + i).val()) || 0;
            var totalPaid = paidUp * nominalPaid;
            $("#totalAmntSharesPaid_" + i).val(totalPaid.toFixed(2));
        }

       
        let tblShare = {
            id: 0,
            parentId: 0,
            classOfShares:"",
            type: "",
            authorizedCapital:0,
            issuedCapital:0,
            subscribedCapital:0,
            paidUpCapital:0,
            nominalAmountPerShare: 0,
            nominalAmountPerShareIssue: 0,
            nominalAmountPerShareSub: 0,
            nominalAmountPerSharePaid: 0,
            totalAmountShares:0,
            totalAmountSharesIssue:0,
            totalAmountSharesSub:0,
            totalAmountSharesPaid:0
        }

        function removeEquityShare(element) {
            $(element).closest('.removeeqtrow').remove();
            let currentValue = parseInt($('#noOfClassesEquity').val(), 10);

            if (!isNaN(currentValue) && currentValue > 0) {
                $('#noOfClassesEquity').val(currentValue - 1);
            }
        }

        function removepreferenceShare(element) {
            $(element).closest('.removeprefrow').remove();
            let currentValue = parseInt($('#noOfClassesPreference').val(), 10);

            if (!isNaN(currentValue) && currentValue > 0) {
                $('#noOfClassesPreference').val(currentValue - 1);
            }
        }

        function getData() {
            var obj = getObj(frm, '#frm');


            obj.equityShareList = $.makeArray($('#equityTable .equityTable')).map(d => getObj(tblShare, d));
            obj.preferenceShareList = $.makeArray($('#preferenceTable .preferenceTable')).map(d => getObj(tblShare, d));
        
            obj.type = `@ViewBag.type`;
            return obj;
        }

        function save(event) {
            event.preventDefault();

            // let isValid = true;
            // if (!vfFrm1.form()) isValid = false;

            // if (!isValid) return;

            var obj = getData()
            $._post(`@R.ApiUrl/@ViewBag.ctrl`, obj).then(x => {
                console.log(x)
                if (x.status) {
                    window.location = `@Url.Action("", "Form")/@ViewBag.ctrl`
                } else {
                    swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: x.message
                    })
                }
            })

        }

        function load() {
            if (@ViewBag.id > 0) {
                $._get(`@R.ApiUrl/@ViewBag.ctrl/${@ViewBag.id}`).then(x => {
                    frm = x
                    setObj(x, "#frm")
                    if (x.equityShareList.length > 0) {
                        $('#equityTable .equityTable').remove()
                        x.equityShareList.forEach(function () {
                            addShareRow("noOfClassesEquity")
                        });
                        $('#equityTable .equityTable').each(function (index) {
                            setObj(x.equityShareList[index], this);
                        });
                        // $('#communicateComment .communicateComment').show()
                    }

                    if (x.preferenceShareList.length > 0) {
                        $('#preferenceTable .preferenceTable').remove()
                        x.preferenceShareList.forEach(function () {
                            addShareRow("noOfClassesPreference")
                        });
                        $('#preferenceTable .preferenceTable').each(function (index) {
                            setObj(x.preferenceShareList[index], this);
                        });
                    }
                    
                })
            }
            var company = localStorage.getItem("comp_id");
            if (company === null || company === undefined || company === "0") {
                alert("Please select Company")
                window.location = `@Url.Action("", "Form")/@ViewBag.ctrl`
                return;
            }
            $._get(`@R.ApiUrl/Company/${company} `).then(x => {
                $("[name='companyId']").val(x.id);
                $("[name='cin']").val(x.cin);
                $("[name='companyName']").val(x.companyName);
                $("[name='companyAddress']").val(x.address);
                $("[name='companyEmail']").val(x.email);
            })

        }


    </script>

}
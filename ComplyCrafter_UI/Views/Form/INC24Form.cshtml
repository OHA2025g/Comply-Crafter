<style>
    .textheader a {
        color: blue;
        text-decoration: none !important;
    }

    .textheader:hover a {
        color: red !important;
        cursor: pointer;
    }
</style>
<div class="row m-auto" id="frm">
    <div class="card " style="flex-direction:row;">
        <div class=" col-lg-12">
            <div class="card-header ">
                <h3>
                    Form No.INC-24
                </h3>

            </div>
            <div class="card-body" style="padding:0px 25px;">
                <p>
                    Application for approval of Central Government for change of name

                    [Pursuant to section 13(2) of the Companies Act, 2013 and Rule 29(2) and 33A of the Companies (Incorporation) Rules 2014]
                </p>

            </div>
            <div class="textheader my-4 mx-3">
                <a href="https://www.mca.gov.in/content/dam/mca-aem-forms/instructionkits/Instruction%20Kit_INC-24.pdf" target="_blank">

                    Refer instruction kit for filing the form

                </a>
            </div>
        </div>

    </div>


    <div class="content-wrapper">
        <div class="container-fluid">
            <main role="main" class="pb-3">
                <div class="row">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between" style="padding: 15px 30px 10px;">
                            <ul class="nav nav-pills nav-fill p-1 bg-transparent" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 active " href="javascript:;" role="part1" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            Entity's Details
                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link mb-0 px-4 py-1 " href="javascript:;" role="part2" data-bs-toggle="tab">
                                        <span class="ms-1">
                                            DSC  Details & Attachments
                                        </span>
                                    </a>
                                </li>

                            </ul>
                        </div>

                    </div>
                </div>


            </main>
        </div>
    </div>

    <div id="part2" class="p-0">
        <div class="card" style="padding:17px;">
        
           
                <input type="hidden" class="num" value="0" name="id" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" />

                <div class="row mt-3" style="">
                    <div class="col-lg-6 my-1 mx-2">
                        <h6 class="typecharge" style=" border-bottom:1px solid black; display:inline-block;">
                            Attachments
                        </h6>
                    </div>


               
                    

                    <div class="row my-2">
                        <div class=" my-3 col-xs-12 col-sm-12 col-md-1 bold form-row" align="center">
                            Sr. No
                        </div>
                        <div class=" my-3 col-xs-12 col-sm-12 col-md-10 bold form-row">
                            Optional attachment(s) - if any
                        </div>
                        <div class="col-xs-12 col-sm-12 col-md-1 form-row" align="center">
                            <button type="button" name="attachmentadd" id="attachmentadd" class="btn-sm btn-primary"><i class=" fa-plus"></i></button>
                        </div>

                    </div>

                    <div id="equity" class="mb-3">


                        <input type="hidden" name="l" id="l" value="1">

                       
                        <div class="row " id="">
                            <div class=" my-2 col-xs-12 col-sm-12 col-md-1 form-row" align="center"> 1. </div>
                            <div class="col-xs-12 col-sm-12 col-md-10 form-row">
                            <input type="file" name="optionalAttachmentfile" id="attachmentfile_2" class="2 my-2">
                            
                        </div>
                    </div>

                    <div class="row mt-3" style="">
                        <div class="col-lg-6 my-1 mx-2">
                            <h6 class="typecharge" style=" border-bottom:1px solid black; display:inline-block;">
                                Declaration
                            </h6>
                        </div>

                    <div class="row" style="height: auto;">
                        <div class="col-xs-12 col-sm-12 col-md-12 form-row" style="padding: 10px;height: auto;">
                            <p>
                                To the best of my knowledge and belief, the information given in this application and its attachments is correct and complete and company has obtained all the mandatory approvals from the concerned authorities and departments in respect of change of name of the company.
                            </p>
                            <p>
                                The Company is not under default for payment or repayment of matured deposits or debentures or interest thereon.
                            </p>
                            <p>I have been authorised by the Board of directors' resolution number* <input type="text" class="num" name="resolutionNumber" id="ResolutionNumber" value="" required="" placeholder="Resolution Number" maxlength="100"> dated* <input type="date" name="resolutionDate" id="ResolutionDate" value="" onchange="systemDate(this)" required="" placeholder="Date of Resolution" class="datepicker hasDatepicker"> to sign and submit this application.</p>
                        </div>
                    </div>
                        <div class="row">
                            <div class="col-lg-4 my-2">
                                <label class="form-label">*Designation</label>
                                <select name="declarationDesignation" id="declarationDesignation" class="form-select" required>
                                    <option value="">Select Designation</option>
                                    <option value="Director">Director</option>
                                    <option value="Manager">Manager</option>
                                    <option value="Company Secretary">Company Secretary</option>
                                    <option value="CEO">CEO</option>
                                    <option value="CFO">CFO</option>
                                </select>
                            </div>

                            <div class="col-lg-4 my-2">
                                <label class="form-label">Signatory</label>
                                <select name="signatory" id="signatory" class="form-select" disabled
                                        style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                    <option value="">Select Signatory</option>
                                </select>
                                <div class="invalid-feedback"></div>
                            </div>

                            <div class="col-lg-4 my-2">
                                <label class="form-label">DIN / PAN</label>
                                <input type="text" class="form-control" name="din" id="din" readonly
                                       style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>

                </div>
                </div>
                </div>
        </div>

    </div>

    @* tab-1 *@

    <div id="part1" class="p-0">
        <div class="col-md-12 p-0">
            <div class="accordion" id="companyAccordion">
                <div class="accordion-item">


                    <div id="collapseDetails" aria-labelledby="detailsHeading" data-bs-parent="#companyAccordion">
                        <div class="card">

                            <div class="card-body">
                                <form id="frmCompanyDetails">
                                    <input type="hidden" class="num" value="0" name="id" />
                                    <input type="hidden" class="num" value="0" name="companyId" />
                                    <div class="row">
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">1 *Corporate Identity Number (CIN)</label>
                                            <input type="text" placeholder="U22219MH2022PTC375586" class="form-control" value="" name="cin" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">2 (a) *Name of the company</label>
                                            <input type="text" placeholder="AKSHAY GRAPHICS PRIVATE LIMITED" class="form-control " value="" name="companyName" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-lg-12 my-2">
                                            <label class="form-label">(b) *Address of the registered office of the company</label>
                                            <input type="text" placeholder="SHOP NO 3 VERTEX VIKAS CHS LTD   WING A SIR M V RD BHD POLICE STN ANDHERI, MUMBAI, Mumbai City, Maharashtra, India, 400069" class="form-control" value="" name="companyAddress" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-lg-12 my-2">
                                            <label class="form-label">(c) *Email ID of the company</label>
                                            <input type="text" placeholder="akshaygraphics69@gmail.com" class="form-control " value="" name="companyEmail" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);" disabled>
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-lg-6 my-1 mx-2">
                                            <h6 class="typecharge" style=" border-bottom:1px solid black; display:inline-block;">
                                                Details of SRN and change of name

                                            </h6>
                                        </div>

                                        <div class="col-md-6 my-2">
                                            <label class="form-label">3(a) *Service Request Number (SRN) of RUN</label>
                                            <input type="text" placeholder="" class="form-control num" value="" name="srn" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(b) *Proposed name of the company</label>
                                            <input type="text" placeholder="" class="form-control " value="" name="proposedCompany" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-md-5 my-2">
                                            <label class="form-label">4 *Reason(s) for change of name</label>
                                            <input type="text" placeholder="" class="form-control " value="" name="changeName" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-7 my-2">
                                            <label class="form-label">5 Particulars of filing Form MGT-14 with Registrar of Companies (RoC)(*SRN of Form MGT-14)</label>
                                            <input type="text" placeholder="" class="form-control num" value="" name="srnOfMgt" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-md-12 my-2">
                                            <label class="form-label">6 *Name of the company at the time of incorporation (to be displayed in the certificate)</label>
                                            <input type="text" placeholder="AKSHAY GRAPHICS PRIVATE LIMITED" disabled class="form-control " value="" name="incorporationCompany" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-md-12 my-2">
                                            <label class="form-label">7.(d) Particulars of the property or asset(s) charged (including complete address and location of the property)</label>
                                            <input type="text" placeholder="" class="form-control" value="" name="assetsProperties" sstyle="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-lg-6 my-1 mx-2">
                                            <h6 class="typecharge" style=" border-bottom:1px solid black; display:inline-block;">
                                                Details of members

                                            </h6>
                                        </div>
                                        <div class="col-lg-12 my-1 mx-2">
                                            <h6 class="typecharge bold">
                                                7. (a) Number of members present at the meeting where the special resolution was passed for change of name and number of shares held by them
                                            </h6>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(i) *Number of members</label>
                                            <input type="text" class="form-control num" name="resolutionMemberNumbers" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(ii) *Number of shares held by them</label>
                                            <input type="text" class="form-control num" name="resolutionMemberShares" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-lg-12 my-1 mx-2">
                                            <h6 class="typecharge bold">
                                                (b) Number of members who voted in favour of change of name and number of shares held by them
                                            </h6>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(i) *Number of members</label>
                                            <input type="text" class="form-control num" name="favourMembers" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(ii) *Number of shares held by them</label>
                                            <input type="text" class="form-control num" name="favourShares" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-lg-12 my-1 mx-2">
                                            <h6 class="typecharge bold">
                                                (c) Number of members who voted against change of name and number of shares held by them
                                            </h6>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(i) *Number of members</label>
                                            <input type="text" class="form-control num" name="againstMembers" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(ii) *Number of shares held by them</label>
                                            <input type="text" class="form-control num" name="againstShares" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>

                                        <div class="col-lg-12 my-1 mx-2">
                                            <h6 class="typecharge bold">
                                                (d) Details of members who abstained from voting and number of shares held by them
                                            </h6>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(i) *Number of members</label>
                                            <input type="text" class="form-control num" name="abstainedMembers" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                        <div class="col-md-6 my-2">
                                            <label class="form-label">(ii) *Number of shares held by them</label>
                                            <input type="text" class="form-control num" name="abstainedShares" style="box-shadow: 0 0 11px 1px rgba(0, 0, 0, .05);">
                                            <div class="invalid-feedback"></div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div class="col-m-12 mt-3">
        <button class="btn btn-md btn-primary" style="float: right;" onclick="save(event)">
            Submit
        </button>
    </div>
</div>
<script>
    $(document).on('input', '.num', function () {
        this.value = this.value.replace(/\D/g, '');
    });







        
</script>



@section Scripts {
    <script>
        var frm = {
            id: 0,
            companyId: 0,

            cin: "",
            companyName: "",
            companyAddress: "",
            companyEmail: "",

            srn: "",
            proposedCompany: "",
            changeName: "",
            srnOfMgt: "",
            incorporationCompany: "",
            assetsProperties: "",
            resolutionMemberNumbers: 0,
            resolutionMemberShares: 0,
            favourMembers: 0,
            favourShares: 0,
            againstMembers: 0,
            againstShares: 0,
            abstainedMembers: 0,
            abstainedShares: 0,

            // part 2
            optionalAttachmentfile: "",
            resolutionNumber: 0,
            resolutionDate: "",
            declarationDesignation: "",
            signatory: "",
            din: ""
        };

        var voFrm = {
            id: 'required',
            companyId: 'required',
        };

        var vfFrm = null;

        $(document).ready(function () {
            $("#part2").hide();
            $("#part3").hide();

            $('a[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                var active = $(e.target).attr('role');
                $("#part1, #part2, #part3").hide();
                $("#" + active).show();
            });

            load();

            vfFrm = $('#frm').validate({
                rules: voFrm,
                onsubmit: () => {
                    console.log('submit');
                }
            });

            // Handle Designation Change
            $("#declarationDesignation").on("change", function () {
                const designation = $(this).val();
                const companyId = localStorage.getItem("comp_id");

                if (designation === "Director") {
                    if (!companyId || companyId === "0") {
                        alert("Company not selected.");
                        return;
                    }

                    // Fetch Directors by Company
                    $.get(`https://dev-api.complycrafter.com/api/Director/ByCompany/${companyId}`, function (response) {
                        if (response && response.length > 0) {
                            let usedNames = new Set();
                            let options = `<option value="">Select Signatory</option>`;

                            response.forEach(dir => {
                                const fullName = `${dir.firstName || ''} ${dir.middleName || ''} ${dir.lastName || ''}`.trim().replace(/\s+/g, ' ');
                                const din = dir.din || '';

                                if (fullName && !usedNames.has(fullName)) {
                                    usedNames.add(fullName);
                                    options += `<option value="${fullName}" data-din="${din}">${fullName}</option>`;
                                }
                            });

                            $("#signatory").html(options).prop("disabled", false);
                            $("#din").val("");
                        } else {
                            $("#signatory").html('<option value="">No directors found</option>').prop("disabled", true);
                            $("#din").val("");
                        }
                    }).fail(function () {
                        alert("Failed to fetch directors.");
                        $("#signatory").html('<option value="">Error loading</option>').prop("disabled", true);
                        $("#din").val("");
                    });

                } else {
                    $("#signatory").html('<option value="">Not applicable</option>').prop("disabled", true);
                    $("#din").val("");
                }
            });

            // Set DIN when Signatory is selected
            $("#signatory").on("change", function () {
                const din = $(this).find(':selected').data("din") || "";
                $("#din").val(din);
            });
        });

        function save(event) {
            event.preventDefault();

            var obj = getObj(frm, '#frm');
            $._post(`@R.ApiUrl/@ViewBag.ctrl`, obj).then(x => {
                console.log(x);
                if (x.status) {
                    window.location = `@Url.Action("", "Form")/@ViewBag.ctrl`;
                } else {
                    swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: x.message
                    });
                }
            });
        }

        function load() {
            if (@ViewBag.id > 0) {
                $._get(`@R.ApiUrl/@ViewBag.ctrl/${@ViewBag.id}`).then(x => {
                    frm = x;
                    setObj(x, "#frm");
                });
            }

            var company = localStorage.getItem("comp_id");
            if (!company || company === "0") {
                alert("Please select Company");
                window.location = `@Url.Action("", "Form")/@ViewBag.ctrl`;
                return;
            }

            $._get(`@R.ApiUrl/Company/${company}`).then(x => {
                $("[name='companyId']").val(x.id);
                $("[name='cin']").val(x.cin);
                $("[name='companyName']").val(x.companyName);
                $("[name='companyAddress']").val(x.address);
                $("[name='companyEmail']").val(x.email);
            });
        }
    </script>



}